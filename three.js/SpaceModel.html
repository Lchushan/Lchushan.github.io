<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>001-空间线 | Liang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.64852305.css" as="style"><link rel="preload" href="/assets/js/app.8914b41c.js" as="script"><link rel="preload" href="/assets/js/3.7f8ab6bd.js" as="script"><link rel="preload" href="/assets/js/10.12b4bf37.js" as="script"><link rel="prefetch" href="/assets/js/11.986ec194.js"><link rel="prefetch" href="/assets/js/12.127689ae.js"><link rel="prefetch" href="/assets/js/13.528417d2.js"><link rel="prefetch" href="/assets/js/14.ccd1b44f.js"><link rel="prefetch" href="/assets/js/15.df2ae387.js"><link rel="prefetch" href="/assets/js/16.7bbe874c.js"><link rel="prefetch" href="/assets/js/17.4b65eca3.js"><link rel="prefetch" href="/assets/js/18.b4f5604c.js"><link rel="prefetch" href="/assets/js/19.ada119ee.js"><link rel="prefetch" href="/assets/js/2.f7dde802.js"><link rel="prefetch" href="/assets/js/20.d063279a.js"><link rel="prefetch" href="/assets/js/21.d15b3ac7.js"><link rel="prefetch" href="/assets/js/22.5185a1a5.js"><link rel="prefetch" href="/assets/js/23.91b5f7c4.js"><link rel="prefetch" href="/assets/js/24.545bc1fb.js"><link rel="prefetch" href="/assets/js/25.ce0688e9.js"><link rel="prefetch" href="/assets/js/26.14f7ddb2.js"><link rel="prefetch" href="/assets/js/27.1d380883.js"><link rel="prefetch" href="/assets/js/28.84fd7342.js"><link rel="prefetch" href="/assets/js/29.977a10c6.js"><link rel="prefetch" href="/assets/js/30.e27d5c6c.js"><link rel="prefetch" href="/assets/js/31.fef44b40.js"><link rel="prefetch" href="/assets/js/32.3cde5ab7.js"><link rel="prefetch" href="/assets/js/33.2fd0f2f0.js"><link rel="prefetch" href="/assets/js/34.6174b407.js"><link rel="prefetch" href="/assets/js/35.3457d0d3.js"><link rel="prefetch" href="/assets/js/36.c672256a.js"><link rel="prefetch" href="/assets/js/37.c5336199.js"><link rel="prefetch" href="/assets/js/38.f878aa15.js"><link rel="prefetch" href="/assets/js/39.7272608e.js"><link rel="prefetch" href="/assets/js/4.591798d0.js"><link rel="prefetch" href="/assets/js/40.1f5087ab.js"><link rel="prefetch" href="/assets/js/41.d8defd1f.js"><link rel="prefetch" href="/assets/js/42.4decf61e.js"><link rel="prefetch" href="/assets/js/43.1f54a9fb.js"><link rel="prefetch" href="/assets/js/44.05628c46.js"><link rel="prefetch" href="/assets/js/45.b64569a4.js"><link rel="prefetch" href="/assets/js/46.3e758616.js"><link rel="prefetch" href="/assets/js/47.754e4534.js"><link rel="prefetch" href="/assets/js/48.d7707287.js"><link rel="prefetch" href="/assets/js/49.c62b8419.js"><link rel="prefetch" href="/assets/js/5.ae5a8b30.js"><link rel="prefetch" href="/assets/js/50.60fbaa68.js"><link rel="prefetch" href="/assets/js/51.812c8fc9.js"><link rel="prefetch" href="/assets/js/52.bae4e31b.js"><link rel="prefetch" href="/assets/js/53.bdcc492b.js"><link rel="prefetch" href="/assets/js/54.c9eece36.js"><link rel="prefetch" href="/assets/js/55.bec15e04.js"><link rel="prefetch" href="/assets/js/56.3e4a4b07.js"><link rel="prefetch" href="/assets/js/57.300f3929.js"><link rel="prefetch" href="/assets/js/58.9b3bc2f8.js"><link rel="prefetch" href="/assets/js/59.b4f2f65a.js"><link rel="prefetch" href="/assets/js/6.c6d5d1da.js"><link rel="prefetch" href="/assets/js/60.6da1c705.js"><link rel="prefetch" href="/assets/js/61.0f431e1e.js"><link rel="prefetch" href="/assets/js/62.ca980bdb.js"><link rel="prefetch" href="/assets/js/63.b1d0e0d0.js"><link rel="prefetch" href="/assets/js/64.a5dc88b1.js"><link rel="prefetch" href="/assets/js/65.2134e59f.js"><link rel="prefetch" href="/assets/js/66.2ce26325.js"><link rel="prefetch" href="/assets/js/67.be6c5ba6.js"><link rel="prefetch" href="/assets/js/68.5ee46489.js"><link rel="prefetch" href="/assets/js/69.817ef5b5.js"><link rel="prefetch" href="/assets/js/7.39a2feef.js"><link rel="prefetch" href="/assets/js/70.bd026d5e.js"><link rel="prefetch" href="/assets/js/71.94cd51c9.js"><link rel="prefetch" href="/assets/js/72.2852256c.js"><link rel="prefetch" href="/assets/js/73.ff13867e.js"><link rel="prefetch" href="/assets/js/74.d43a4484.js"><link rel="prefetch" href="/assets/js/75.8a138783.js"><link rel="prefetch" href="/assets/js/76.75869419.js"><link rel="prefetch" href="/assets/js/77.85ccf9b3.js"><link rel="prefetch" href="/assets/js/78.d1f93c97.js"><link rel="prefetch" href="/assets/js/79.476c7345.js"><link rel="prefetch" href="/assets/js/8.6aa44381.js"><link rel="prefetch" href="/assets/js/80.75df788e.js"><link rel="prefetch" href="/assets/js/81.8dabfdfb.js"><link rel="prefetch" href="/assets/js/82.b373d124.js"><link rel="prefetch" href="/assets/js/83.543e5130.js"><link rel="prefetch" href="/assets/js/84.551d04d7.js"><link rel="prefetch" href="/assets/js/85.21a99aad.js"><link rel="prefetch" href="/assets/js/9.ab9a5c08.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64852305.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Liang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  vuepress
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/插件小技巧/" class="nav-link">
  插件小技巧
</a></li><li class="dropdown-item"><!----> <a href="/前端问题/" class="nav-link">
  前端问题
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue问题
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react问题
</a></li><li class="dropdown-item"><!----> <a href="/优化问题/" class="nav-link">
  优化问题
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/regular&amp;git/regular/" class="nav-link">
  正则&amp;git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="画图小软件" class="dropdown-title"><span class="title">画图小软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="画图小软件" class="mobile-dropdown-title"><span class="title">画图小软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/three.js/" class="nav-link router-link-active">
  three.js
</a></li><li class="dropdown-item"><!----> <a href="/eChart/" class="nav-link">
  eChart
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qiankun/" class="nav-link">
  qiankun
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/progress/" class="nav-link">
  记录问题
</a></li><li class="dropdown-item"><!----> <a href="/小案例/" class="nav-link">
  小案例
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/Lchu3/lchushan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  vuepress
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/插件小技巧/" class="nav-link">
  插件小技巧
</a></li><li class="dropdown-item"><!----> <a href="/前端问题/" class="nav-link">
  前端问题
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue问题
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react问题
</a></li><li class="dropdown-item"><!----> <a href="/优化问题/" class="nav-link">
  优化问题
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/regular&amp;git/regular/" class="nav-link">
  正则&amp;git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="画图小软件" class="dropdown-title"><span class="title">画图小软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="画图小软件" class="mobile-dropdown-title"><span class="title">画图小软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/three.js/" class="nav-link router-link-active">
  three.js
</a></li><li class="dropdown-item"><!----> <a href="/eChart/" class="nav-link">
  eChart
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qiankun/" class="nav-link">
  qiankun
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/progress/" class="nav-link">
  记录问题
</a></li><li class="dropdown-item"><!----> <a href="/小案例/" class="nav-link">
  小案例
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/Lchu3/lchushan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>three.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/three.js/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/three.js/SimpleModel.html" class="sidebar-link">简单模型</a></li><li><a href="/three.js/SimpleDynamicEffect.html" class="sidebar-link">简单动效</a></li><li><a href="/three.js/SimpleInteraction.html" class="sidebar-link">简单互动</a></li><li><a href="/three.js/SimpleFont.html" class="sidebar-link">简单字体</a></li><li><a href="/three.js/SpaceModel.html" aria-current="page" class="active sidebar-link">空间模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_001-空间线" class="sidebar-link">001-空间线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#自定义图形的线条宽度和颜色" class="sidebar-link">自定义图形的线条宽度和颜色</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#catmullromcurve3-曲线" class="sidebar-link">CatmullRomCurve3-曲线</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#三维向量-vector3" class="sidebar-link">三维向量（Vector3）</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_002-球体阴影" class="sidebar-link">002-球体阴影</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#directionallight光源" class="sidebar-link">DirectionalLight光源</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#聚光灯光源" class="sidebar-link">聚光灯光源</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#阴影模糊状态" class="sidebar-link">阴影模糊状态</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#多个光源" class="sidebar-link">多个光源</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#three-pointlight光源" class="sidebar-link">THREE.PointLight光源</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#半球光源" class="sidebar-link">半球光源</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_003-全景图设置场景背景" class="sidebar-link">003-全景图设置场景背景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#单独全景图设置场景背景" class="sidebar-link">单独全景图设置场景背景</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#带three-cubecamera相机的全景图设置场景背景" class="sidebar-link">带THREE.CubeCamera相机的全景图设置场景背景</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#创建2个光源" class="sidebar-link">创建2个光源</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_004-带箭头" class="sidebar-link">004-带箭头</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#球体带箭头" class="sidebar-link">球体带箭头</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#多边形带箭头" class="sidebar-link">多边形带箭头</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_005-自转和公转" class="sidebar-link">005-自转和公转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#中间大球自转-小球围着大球公转并且自转" class="sidebar-link">中间大球自转，小球围着大球公转并且自转</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#小球围着中心点公转并自转" class="sidebar-link">小球围着中心点公转并自转</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#小球围着中心点公转并自转-光晕围着中心点转-使用相机自动旋转达到公转效果" class="sidebar-link">小球围着中心点公转并自转，光晕围着中心点转(使用相机自动旋转达到公转效果)</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#按轨道旋转-行星" class="sidebar-link">按轨道旋转（行星）</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_006-多个立方体只转动一个" class="sidebar-link">006-多个立方体只转动一个</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#mycube1的立方体旋转-2个立方体其中1个固定1个旋转" class="sidebar-link">myCube1的立方体旋转（2个立方体其中1个固定1个旋转）</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#mysecond的立方体旋转-3个立方体其中2个固定1个旋转" class="sidebar-link">mySecond的立方体旋转（3个立方体其中2个固定1个旋转）</a></li></ul></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_007-光照区域" class="sidebar-link">007-光照区域</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_008-光照贴图到平面" class="sidebar-link">008-光照贴图到平面</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_009-三维的立方体-角度在大的立方体内" class="sidebar-link">009-三维的立方体（角度在大的立方体内）</a></li><li class="sidebar-sub-header"><a href="/three.js/SpaceModel.html#_010" class="sidebar-link">010-</a></li></ul></li><li><a href="/three.js/SpecialEffects.html" class="sidebar-link">特效效果</a></li><li><a href="/three.js/three.js.html" class="sidebar-link">three.js</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_001-空间线"><a href="#_001-空间线" class="header-anchor">#</a> 001-空间线</h2> <h3 id="自定义图形的线条宽度和颜色"><a href="#自定义图形的线条宽度和颜色" class="header-anchor">#</a> 自定义图形的线条宽度和颜色</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//自定义图形的线条宽度和颜色</span>
<span class="token keyword">var</span> myPositions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 	<span class="token comment">// 位置</span>
<span class="token keyword">var</span> myColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">// 颜色</span>
<span class="token keyword">var</span> myPoints <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>GeometryUtils<span class="token punctuation">.</span><span class="token function">hilbert3D</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCurve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CatmullRomCurve3</span><span class="token punctuation">(</span>myPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> divisions <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">*</span> myPoints<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myPoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> divisions<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t <span class="token operator">=</span> i <span class="token operator">/</span> l<span class="token punctuation">;</span>
  myCurve<span class="token punctuation">.</span><span class="token function">getPoint</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> myPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myPositions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>myPoint<span class="token punctuation">.</span>x<span class="token punctuation">,</span> myPoint<span class="token punctuation">.</span>y<span class="token punctuation">,</span> myPoint<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myColor<span class="token punctuation">.</span><span class="token function">setHSL</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myColors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>myColor<span class="token punctuation">.</span>r<span class="token punctuation">,</span> myColor<span class="token punctuation">.</span>g<span class="token punctuation">,</span> myColor<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> myGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myGeometry<span class="token punctuation">.</span><span class="token function">setPositions</span><span class="token punctuation">(</span>myPositions<span class="token punctuation">)</span><span class="token punctuation">;</span>
myGeometry<span class="token punctuation">.</span><span class="token function">setColors</span><span class="token punctuation">(</span>myColors<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">linewidth</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">vertexColors</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Line2</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">,</span> myMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
myLine<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMaterial<span class="token punctuation">.</span>resolution<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-01.e2b6a5bb.png" alt="屏幕录制2023-07-27-11.47.33"></p> <h3 id="catmullromcurve3-曲线"><a href="#catmullromcurve3-曲线" class="header-anchor">#</a> CatmullRomCurve3-曲线</h3> <p>使用Catmull-Rom算法， 从一系列的点创建一条平滑的三维样条曲线。</p> <h4 id="代码示例"><a href="#代码示例" class="header-anchor">#</a> 代码示例</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//Create a closed wavey loop </span>
<span class="token keyword">const</span> curve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CatmullRomCurve3</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> 
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span> 
<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> points <span class="token operator">=</span> curve<span class="token punctuation">.</span><span class="token function">getPoints</span><span class="token punctuation">(</span> <span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFromPoints</span><span class="token punctuation">(</span> points <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Create the final object to add to the scene </span>
<span class="token keyword">const</span> curveObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Line</span><span class="token punctuation">(</span> geometry<span class="token punctuation">,</span> material <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> 构造函数</h4> <p>CatmullRomCurve3( points : Array, closed : Boolean, curveType : String, tension : Float )</p> <ul><li>points – Vector3点数组</li> <li>curveType – 曲线的类型，默认值为<strong>centripetal</strong>。</li> <li>closed – 该曲线是否闭合，默认值为false。</li> <li>tension – 曲线的张力，默认为<strong>0.5</strong>。</li></ul> <h4 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h4> <ul><li>.points : Array
<ul><li>定义了这一曲线的Vector3点数组，数组中至少需要两个点。</li></ul></li> <li>.closed: Boolean
<ul><li>当该值为true时，曲线将会闭合（环回自身）。</li></ul></li> <li>.curveType: String
<ul><li>可能的值为<strong>centripetal</strong>、<strong>chordal</strong>和<strong>catmullrom</strong>。</li></ul></li> <li>.tension: Float
<ul><li>当.curveType为<strong>catmullrom</strong>时，定义catmullrom的张力。</li></ul></li></ul> <h3 id="三维向量-vector3"><a href="#三维向量-vector3" class="header-anchor">#</a> 三维向量（Vector3）</h3> <p>该类表示的是一个三维向量（3D vector](https://en.wikipedia.org/wiki/Vector_space)）。 一个三维向量表示的是一个有顺序的、三个为一组的数字组合（标记为x、y和z）， 可被用来表示很多事物，例如：</p> <ul><li>一个位于三维空间中的点。</li> <li>一个在三维空间中的方向与长度的定义。在three.js中，长度总是从(0, 0, 0)到(x, y, z)的 Euclidean distance](https://en.wikipedia.org/wiki/Euclidean_distance)（欧几里德距离，即直线距离）， 方向也是从(0, 0, 0)到(x, y, z)的方向。</li> <li>任意的、有顺序的、三个为一组的数字组合。</li></ul> <p>其他的一些事物也可以使用二维向量进行表示，比如说动量矢量等等； 但以上这些是它在three.js中的常用用途。</p> <p>对 Vector3 实例进行遍历将按相应的顺序生成它的分量 (x, y, z)。</p> <h4 id="代码示例-2"><a href="#代码示例-2" class="header-anchor">#</a> 代码示例</h4> <div class="language- extra-class"><pre class="language-text"><code>const a = new THREE.Vector3( 0, 1, 0 ); //no arguments; will be initialised to (0, 0, 0) const b = new THREE.Vector3( ); const d = a.distanceTo( b );
</code></pre></div><h4 id="构造函数-2"><a href="#构造函数-2" class="header-anchor">#</a> 构造函数</h4> <p>Vector3( x : Float, y : Float, z : Float )</p> <ul><li>x - 向量的x值，默认为<strong>0</strong>。</li> <li>y - 向量的y值，默认为<strong>0</strong>。</li> <li>z - 向量的z值，默认为<strong>0</strong>。</li></ul> <p>创建一个新的Vector3。</p> <h4 id="属性-2"><a href="#属性-2" class="header-anchor">#</a> 属性</h4> <p>.isVector3: Boolean</p> <p>Read-only flag to check if a given object is of type Vector3.</p> <ul><li><p>.x: Float</p></li> <li><p>.y : Float</p></li> <li><p>.z : Float</p></li></ul> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <ul><li><p>.add ( v : Vector3) : this</p> <ul><li>将传入的向量v和这个向量相加。</li></ul></li> <li><p>.addScalar ( s : Float ) : this</p> <ul><li>将传入的标量s和这个向量的x值、y值以及z值相加。</li></ul></li> <li><p>.addScaledVector( v : Vector3, s : Float ) : this</p> <ul><li>将所传入的v与s相乘所得的乘积和这个向量相加。</li></ul></li> <li><p>.addVectors ( a : Vector3, b : Vector3) : this</p> <ul><li>将该向量设置为a + b。</li></ul></li> <li><p>.applyAxisAngle( axis : Vector3, angle : Float ) : this</p> <ul><li>axis - 一个被归一化的Vector3。</li> <li>angle - 以弧度表示的角度。</li> <li>将轴和角度所指定的旋转应用到该向量上。</li></ul></li> <li><p>.applyEuler ( euler : Euler ) : this</p> <ul><li>通过将Euler（欧拉）对象转换为Quaternion（四元数）并应用， 将欧拉变换应用到这一向量上。</li></ul></li> <li><p>.applyMatrix3( m : Matrix3 ) : this</p> <ul><li>将该向量乘以三阶矩阵m。</li></ul></li> <li><p>.applyMatrix4 ( m : Matrix4 ) : this</p> <ul><li>将该向量乘以四阶矩阵m（第四个维度隐式地为1），并按角度进行划分。</li></ul></li> <li><p>.applyNormalMatrix ( m : Matrix3 ) : this</p> <ul><li>将该向量乘以正规矩阵 m，并将结果进行归一化。</li></ul></li> <li><p>.applyQuaternion ( quaternion : Quaternion-) : this</p> <ul><li>将Quaternion变换应用到该向量。</li></ul></li> <li><p>.angleTo ( v : Vector3 ) : Float</p> <ul><li>以弧度返回该向量与向量v</li></ul></li> <li><p>.ceil () : this</p> <ul><li>将该向量x分量、 y分量以及z分量向上取整为最接近的整数。</li></ul></li> <li><p>.clamp ( min : Vector3, max : Vector3 : this</p> <ul><li><p>min - 在限制范围内，x值、y值和z的最小值。</p></li> <li><p>max - 在限制范围内，x值、y值和z的最大值。</p></li> <li><p>如果该向量的x值、y值或z值大于限制范围内最大x值、y值或z值，则该值将会被所对应的值取代。</p></li> <li><p>如果该向量的x值、y值或z值小于限制范围内最小x值、y值或z值，则该值将会被所对应的值取代。</p></li></ul></li> <li><p>.clampLength ( min : Float, max : Float ) : this</p> <ul><li><p>min - 长度将被限制为的最小值</p></li> <li><p>max - 长度将被限制为的最大值</p></li> <li><p>如果向量长度大于最大值，则它将会被最大值所取代。</p></li> <li><p>如果向量长度小于最小值，则它将会被最小值所取代。</p></li></ul></li> <li><p>.clampScalar ( min : Float, max : Float ) : this</p> <ul><li><p>min - 分量将被限制为的最小值</p></li> <li><p>max - 分量将被限制为的最大值</p></li> <li><p>如果该向量的x值、y值或z值大于最大值，则它们将被最大值所取代。</p></li> <li><p>如果该向量的x值、y值或z值小于最小值，则它们将被最小值所取代。</p></li></ul></li> <li><p>.clone () : Vector3</p> <ul><li>返回一个新的Vector3，其具有和当前这个向量相同的x、y 和z 。</li></ul></li> <li><p>.copy ( v : Vector3 ): this</p> <ul><li>将所传入Vector3的x 、y和z属性复制给这一Vector3。</li></ul></li> <li><p>.cross ( v : Vector3 ) : this</p> <ul><li>将该向量设置为它本身与传入的v -cross product）。</li></ul></li> <li><p>.crossVectors ( a : Vector3  , b : Vector3  ) : this</p> <ul><li>将该向量设置为传入的a-b-cross product）。</li></ul></li> <li><p>.distanceTo  ( v : Vector3 ) : Float</p> <ul><li>计算该向量到所传入的v-</li></ul></li> <li><p>.manhattanDistanceTo  ( v : Vector3 ) : Float</p> <ul><li>计算该向量到所传入的v-Manhattan distance。</li></ul></li> <li><p>.distanceToSquared  ( v : Vector3 ) : Float</p> <ul><li>计算该向量到传入的v- 如果你只是将该距离和另一个距离进行比较，则应当比较的是距离的平方， 因为它的计算效率会更高一些。</li></ul></li> <li><p>.divide  ( v : Vector3 ) : this</p> <ul><li>将该向量除以向量v-</li></ul></li> <li><p>.divideScalar  ( s : Float ) : this</p> <ul><li>将该向量除以标量s。</li></ul></li> <li><p>.dot  ( v : Vector3 ) : Float</p> <ul><li>计算该vector和所传入v-dot product。</li></ul></li> <li><p>.equals  ( v : Vector3 ) : Boolean</p> <ul><li>检查该向量和v-</li></ul></li> <li><p>.floor  () : this</p> <ul><li>向量的分量向下取整为最接近的整数值。</li></ul></li> <li><p>.fromArray  ( array : Array, offset : Integer ) : this</p> <ul><li><p>array - 来源矩阵。</p></li> <li><p>offset - （可选）在数组中的元素偏移量，默认值为0。</p></li> <li><p>设置向量中的x 值为array[ offset + 0 ]，y 值为array[ offset + 1 ]， z 值为array[ offset + 2 ]。</p></li></ul></li> <li><p>.fromBufferAttribute  ( attribute : BufferAttribute, index : Integer ) : this</p> <ul><li><p>attribute - 来源的attribute。</p></li> <li><p>index - 在attribute中的索引。</p></li> <li><p>从attribute-x 值、y 值和z 值。</p></li></ul></li> <li><p>.getComponent  ( index : Integer ) : Float</p> <ul><li><p>index - 0, 1 or 2.</p></li> <li><p>如果index值为0返回x 值。</p></li> <li><p>如果index值为1返回y 值。</p></li> <li><p>如果index值为2返回z 值。</p></li></ul></li> <li><p>.length  () : Float</p> <ul><li>计算从(0, 0, 0) 到 (x, y, z)的欧几里得长度 （Euclidean length，即直线长度）</li></ul></li> <li><p>.manhattanLength  () : Float</p> <ul><li>计算该向量的曼哈顿长度（Manhattan length）。</li></ul></li> <li><p>.lengthSq  () : Float</p> <ul><li>计算从(0, 0, 0)到(x, y, z)的欧几里得长度 （Euclidean length，即直线长度）的平方。 如果你正在比较向量的长度，应当比较的是长度的平方，因为它的计算效率更高一些。</li></ul></li> <li><p>.lerp  ( v : Vector3, alpha : Float ) : this</p> <ul><li><p>v - 朝着进行插值的Vector3-</p></li> <li><p>alpha - 插值因数，其范围通常在[0, 1]闭区间。</p></li> <li><p>在该向量与传入的向量v- —— alpha = 0 时表示的是当前向量，alpha = 1 时表示的是所传入的向量v-</p></li></ul></li> <li><p>.lerpVectors  ( v1 : Vector3, v2 : Vector3, alpha : Float ) : this</p> <ul><li><p>v1 - 起始的Vector3-</p></li> <li><p>v2 - 朝着进行插值的Vector3-</p></li> <li><p>alpha - 插值因数，其范围通常在[0, 1]闭区间。</p></li> <li><p>将此向量设置为在v1-v2- 其中alpha为两个向量之间连线的长度的百分比 —— alpha = 0 时表示的是v1- = 1 时表示的是v2-</p></li></ul></li> <li><p>.max  ( v : Vector3 ) : this</p> <ul><li>如果该向量的x值、y值或z值小于所传入v- 则将该值替换为对应的最大值。</li></ul></li> <li><p>.min  ( v : Vector3 ) : this</p> <ul><li>如果该向量的x值、y值或z值大于所传入v- 则将该值替换为对应的最小值。</li></ul></li> <li><p>.multiply  ( v : Vector3 ) : this</p> <ul><li>将该向量与所传入的向量v-</li></ul></li> <li><p>.multiplyScalar  ( s : Float ) : this</p> <ul><li>将该向量与所传入的标量s进行相乘。</li></ul></li> <li><p>.multiplyVectors  ( a : Vector3, b : Vector3 ) : this</p> <ul><li>按照分量顺序，将该向量设置为和a * b-</li></ul></li> <li><p>.negate  () : this</p> <ul><li>向量取反，即： x = -x, y = -y , z = -z。</li></ul></li> <li><p>.normalize  () : this</p> <ul><li>将该向量转换为单位向量（unit vector）， 也就是说，将该向量的方向设置为和原向量相同，但是其长度（length ）为1。</li></ul></li> <li><p>.project  ( camera : Camera ) : this</p> <ul><li><p>camera — 在投影中使用的摄像机。</p></li> <li><p>将此向量(坐标)从世界空间投影到相机的标准化设备坐标 (NDC) 空间。</p></li></ul></li> <li><p>.projectOnPlane  ( planeNormal : Vector3 ) : this</p> <ul><li><p>planeNormal - 表示平面法线的向量</p></li> <li><p>Projects 通过从该向量减去投影到平面法线上的向量，将该向量投影到平面上。</p></li></ul></li> <li><p>.projectOnVector  ( v : Vector3 ) : this</p> <ul><li>投影（Projects）该向量到向量v-</li></ul></li> <li><p>.reflect  ( normal : Vector3 ) : this</p> <ul><li><p>normal - 反射面法线</p></li> <li><p>将该向量设置为对指定 normal 法线的表面的反射向量。假设法线具有单位长度。</p></li></ul></li> <li><p>.round  () : this</p> <ul><li>向量中的分量四舍五入取整为最接近的整数值。</li></ul></li> <li><p>.roundToZero  () : this</p> <ul><li>向量中的分量朝向0取整数（若分量为负数则向上取整，若为正数则向下取整）。</li></ul></li> <li><p>.set  ( x : Float, y : Float, z : Float ) : this</p> <ul><li>设置该向量的x 、y  和 z  分量。</li></ul></li> <li><p>.setComponent  ( index : Integer, value : Float ) : this</p> <ul><li><p>index - 0、1 或 2。</p></li> <li><p>value - Float</p></li> <li><p>若index为 0 则设置 x  值为 value。</p></li> <li><p>若index为 1 则设置 y  值为 value。</p></li> <li><p>若index为 2 则设置 z  值为 value。</p></li></ul></li> <li><p>.setFromCylindrical  ( c : Cylindrical ) : this</p> <ul><li>从圆柱坐标c-</li></ul></li> <li><p>.setFromCylindricalCoords  ( radius : Float, theta : Float, y : Float ) : this</p> <ul><li>从圆柱坐标中的radius-theta-y-</li></ul></li> <li><p>.setFromEuler  ( euler : Euler ) : this</p> <ul><li>根据指定的Euler Angle-x 、y 、z 分量。</li></ul></li> <li><p>.setFromMatrixColumn  ( matrix : Matrix4, index : Integer ) : this</p> <ul><li>从传入的四阶矩阵matrix- 设置该向量的x 值、y 值和z 值。</li></ul></li> <li><p>.setFromMatrix3Column  ( matrix : Matrix3, index : Integer ) : this</p> <ul><li>从传入的三阶矩阵 matrix 由 index 指定的列中，设置该向量的 x  值、y  值和 z  值。</li></ul></li> <li><p>.setFromMatrixPosition  ( m : Matrix4 ) : this</p> <ul><li>从变换矩阵（transformation matrix）m- 设置该向量为其中与位置相关的元素。</li></ul></li> <li><p>.setFromMatrixScale  ( m : Matrix4 ) : this</p> <ul><li>从变换矩阵（transformation matrix）m- 设置该向量为其中与缩放相关的元素。</li></ul></li> <li><p>.setFromSpherical  ( s : Spherical ) : this</p> <ul><li>从球坐标s-</li></ul></li> <li><p>.setFromSphericalCoords  ( radius : Float, phi : Float, theta : Float ) : this</p> <ul><li>从球坐标中的radius-phi-theta-</li></ul></li> <li><p>.setLength  ( l : Float ) : this</p> <ul><li>将该向量的方向设置为和原向量相同，但是长度（length ）为l。</li></ul></li> <li><p>.setScalar  ( scalar : Float ) : this</p> <ul><li>将该向量的x 、y 和z 值同时设置为等于传入的scalar。</li></ul></li> <li><p>.setX  ( x : Float ) : this</p> <ul><li>将向量中的x 值替换为x。</li></ul></li> <li><p>.setY  ( y : Float ) : this</p> <ul><li>将向量中的y 值替换为y。</li></ul></li> <li><p>.setZ  ( z : Float ) : this</p> <ul><li>将向量中的z 值替换为z。</li></ul></li> <li><p>.sub  ( v : Vector3 ) : this</p> <ul><li>从该向量减去向量v-</li></ul></li> <li><p>.subScalar  ( s : Float ) : this</p> <ul><li>从该向量的x 、y 和z 中减去标量s。</li></ul></li> <li><p>.subVectors  ( a : Vector3, b : Vector3 ) : this</p> <ul><li>将该向量设置为a - b-</li></ul></li> <li><p>.toArray  ( array : Array, offset : Integer ) : Array</p> <ul><li><p>array - （可选）被用于存储向量的数组。如果这个值没有传入，则将创建一个新的数组。</p></li> <li><p>offset - （可选） 数组中元素的偏移量。</p></li> <li><p>返回一个数组x, y ,z]，或者将x、y和z复制到所传入的array中。</p></li></ul></li> <li><p>.transformDirection  ( m : Matrix4 ) : this</p> <ul><li>通过传入的矩阵（m- x 3子矩阵）变换向量的方向， 并将结果进行normalizes （归一化）。</li></ul></li> <li><p>.unproject  ( camera : Camera ) : this</p> <ul><li><p>camera — 在投影中使用的摄像机。</p></li> <li><p>将此向量(坐标)从相机的标准化设备坐标 (NDC) 空间投影到世界空间。</p></li></ul></li> <li><p>.random  () : this</p> <ul><li>将该向量的每个分量(x、y、z)设置为介于 0 和 1 之间的伪随机数，不包括 1。</li></ul></li></ul> <h2 id="_002-球体阴影"><a href="#_002-球体阴影" class="header-anchor">#</a> 002-球体阴影</h2> <h3 id="directionallight光源"><a href="#directionallight光源" class="header-anchor">#</a> DirectionalLight光源</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">480</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置为true才能看到阴影</span>
myRenderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">480</span><span class="token operator">/</span><span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建DirectionalLight光源</span>
<span class="token keyword">var</span> myLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置为true才能看到阴影</span>
myLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> myLight <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 
//创建DirectionalLight光源辅助线
var myDirectionalLightHelper = new THREE.DirectionalLightHelper(myLight, 50, 0x00ff00);
myScene.add(myDirectionalLightHelper);
*/</span>
<span class="token comment">//创建用于投射阴影的球体</span>
<span class="token keyword">var</span> mySphereGeometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereBufferGeometry</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">36</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMaterial<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                                                   <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMesh<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mySphereGeometry<span class="token punctuation">,</span>mySphereMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
mySphereMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置为true才能看到阴影</span>
mySphereMesh<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> mySphereMesh <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建(白色不可见)平面</span>
<span class="token keyword">var</span> myPlaneGeometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myPlaneMaterial<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'white'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myPlaneMesh<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myPlaneGeometry<span class="token punctuation">,</span> myPlaneMaterial <span class="token punctuation">)</span><span class="token punctuation">;</span>
myPlaneMesh<span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">/</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
myPlaneMesh<span class="token punctuation">.</span><span class="token function">rotateZ</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">/</span><span class="token number">7</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
myPlaneMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">//表示平面支持投射阴影</span>
myPlaneMesh<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myPlaneMesh <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染球体和阴影</span>
myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-02.25137a9a.png" alt="截屏2023-07-27 16.04.07"></p> <h3 id="聚光灯光源"><a href="#聚光灯光源" class="header-anchor">#</a> 聚光灯光源</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建聚光灯光源</span>
<span class="token keyword">var</span> mySpotLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySpotLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySpotLight<span class="token punctuation">.</span>distance <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
mySpotLight<span class="token punctuation">.</span>angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token comment">/*
//绘制聚光灯光源辅助线
var mySpotLightHelper=new THREE.SpotLightHelper(mySpotLight,'green');
myScene.add(mySpotLightHelper);
*/</span>
<span class="token comment">//设置为true才能看到阴影</span>
mySpotLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySpotLight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-03.551f8e22.png" alt="截屏2023-07-27 16.08.43"></p> <h3 id="阴影模糊状态"><a href="#阴影模糊状态" class="header-anchor">#</a> 阴影模糊状态</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//设置为true才能看到阴影</span>
myLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        
<span class="token comment">//设置阴影半径以产生模糊效果</span>
myLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> myLight <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-04.dc0d5814.png" alt="截屏2023-07-27 16.13.12"></p> <h3 id="多个光源"><a href="#多个光源" class="header-anchor">#</a> 多个光源</h3> <p>把光源更改成如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建第一束方向光</span>
<span class="token keyword">var</span> myDirectionalLight1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myDirectionalLight1<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myDirectionalLight1<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// //出现部分阴影</span>
<span class="token comment">// myDirectionalLight1.shadow.camera.near = 1;</span>
<span class="token comment">// myDirectionalLight1.shadow.camera.far = 21;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myDirectionalLight1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建第二束方向光</span>
<span class="token keyword">var</span> myDirectionalLight2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置为true才能看到阴影</span>
myDirectionalLight2<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myDirectionalLight2<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myDirectionalLight2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-05.035b8b95.png" alt="截屏2023-07-27 16.16.53"></p> <h3 id="three-pointlight光源"><a href="#three-pointlight光源" class="header-anchor">#</a> THREE.PointLight光源</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建THREE.PointLight光源</span>
<span class="token keyword">var</span> myPointLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myPointLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myPointLight<span class="token punctuation">.</span>distance <span class="token operator">=</span> <span class="token number">380</span><span class="token punctuation">;</span>
<span class="token comment">/*
//绘制THREE.PointLight光源辅助线
var myPointLightHelper=new THREE.PointLightHelper(myPointLight,50,'green');
myScene.add(myPointLightHelper);
*/</span>
<span class="token comment">//设置为true才能看到阴影</span>
myPointLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myPointLight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-06.622ad558.png" alt="截屏2023-07-27 16.19.09"></p> <h3 id="半球光源"><a href="#半球光源" class="header-anchor">#</a> 半球光源</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建并添加红蓝配置的半球光源</span>
<span class="token comment">//即指定接收自天空的颜色，接收自地面的颜色，及光照强度</span>
<span class="token keyword">var</span> myHemisphereLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>HemisphereLight</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myHemisphereLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myHemisphereLight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//绘制半球光源辅助线</span>
<span class="token keyword">var</span> myHemisphereLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>HemisphereLightHelper</span><span class="token punctuation">(</span>myHemisphereLight<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myHemisphereLightHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SimpleModel-45.b743b1aa.png" alt="截屏2023-07-27 17.23.24"></p> <h2 id="_003-全景图设置场景背景"><a href="#_003-全景图设置场景背景" class="header-anchor">#</a> 003-全景图设置场景背景</h2> <h3 id="单独全景图设置场景背景"><a href="#单独全景图设置场景背景" class="header-anchor">#</a> 单独全景图设置场景背景</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> myCamera<span class="token punctuation">,</span> myScene<span class="token punctuation">,</span> myRenderer<span class="token punctuation">;</span>
<span class="token keyword">var</span> lon <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> lat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> phi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> theta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myTextureLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'images/img050.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span>myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用全景图设置场景背景</span>
  myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLCubeRenderTarget</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromEquirectangularTexture</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">,</span> myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  lon <span class="token operator">+=</span> <span class="token number">0.15</span><span class="token punctuation">;</span><span class="token comment">//设置在经度方向的增量</span>
  lat <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">85</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  phi <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">90</span> <span class="token operator">-</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span>
  theta <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span>lon<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>myScene<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="带three-cubecamera相机的全景图设置场景背景"><a href="#带three-cubecamera相机的全景图设置场景背景" class="header-anchor">#</a> 带THREE.CubeCamera相机的全景图设置场景背景</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> myCamera<span class="token punctuation">,</span> myScene<span class="token punctuation">,</span> myRenderer<span class="token punctuation">,</span> myCubeCamera<span class="token punctuation">;</span>
<span class="token keyword">var</span> lon <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> lat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> phi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> theta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myTextureLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'images/img051.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span>myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">alpha</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用全景图设置场景背景</span>
  myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLCubeRenderTarget</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fromEquirectangularTexture</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">,</span> myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//创建THREE.CubeCamera相机</span>
  <span class="token keyword">var</span> myCubeRenderTarget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLCubeRenderTarget</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RGBFormat<span class="token punctuation">,</span> 
    <span class="token literal-property property">generateMipmaps</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minFilter</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearMipmapLinearFilter
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCubeCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeCamera</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> myCubeRenderTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用环境贴图创建MeshBasicMaterial</span>
  <span class="token keyword">var</span> myMeshBasicMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> 
    <span class="token literal-property property">envMap</span><span class="token operator">:</span> myCubeRenderTarget<span class="token punctuation">.</span>texture 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>IcosahedronBufferGeometry</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    myMeshBasicMaterial
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//更新环境贴图(全景照相机不停地拍照)</span>
  myCubeCamera<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">,</span> myScene<span class="token punctuation">)</span><span class="token punctuation">;</span>
  lon <span class="token operator">+=</span> <span class="token number">0.15</span><span class="token punctuation">;</span>
  lat <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">85</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  phi <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">90</span> <span class="token operator">-</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span>
  theta <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span>lon<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>myScene<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="创建2个光源"><a href="#创建2个光源" class="header-anchor">#</a> 创建2个光源</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">var</span> myCubeCamera<span class="token punctuation">,</span> myCamera<span class="token punctuation">,</span> myScene<span class="token punctuation">,</span> myRenderer<span class="token punctuation">;</span>
<span class="token keyword">var</span> lon <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> lat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> phi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> theta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myTextureLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'images/img054.jpg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span>myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">myTexture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建渲染器</span>
  myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span>
                                         window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用全景图设置场景背景</span>
  myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLCubeRenderTarget</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fromEquirectangularTexture</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">,</span> myTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//创建环境光</span>
  <span class="token keyword">var</span> myAmbientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myAmbientLight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//创建两个聚光灯光源</span>
  <span class="token keyword">var</span> mySpotLight1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mySpotLight1<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySpotLight1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> mySpotLight2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mySpotLight2<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySpotLight2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myCubeRenderTarget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLCubeRenderTarget</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span>
                                                           <span class="token punctuation">{</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RGBFormat<span class="token punctuation">,</span> <span class="token literal-property property">generateMipmaps</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minFilter</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearMipmapLinearFilter
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//创建THREE.CubeCamera全景照相机</span>
  myCubeCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeCamera</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> myCubeRenderTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用全景照相机拍摄的环境贴图创建MeshLambertMaterial</span>
  <span class="token keyword">var</span> myMeshLambertMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">envMap</span><span class="token operator">:</span> myCubeRenderTarget<span class="token punctuation">.</span>texture <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> myMeshLambertMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//更新环境贴图(全景照相机不停地拍照)</span>
  myCubeCamera<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">,</span> myScene<span class="token punctuation">)</span><span class="token punctuation">;</span>
  lon <span class="token operator">+=</span> <span class="token number">0.35</span><span class="token punctuation">;</span>
  lat <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">85</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  phi <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">90</span> <span class="token operator">-</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span>
  theta <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MathUtils<span class="token punctuation">.</span><span class="token function">degToRad</span><span class="token punctuation">(</span>lon<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>myScene<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_004-带箭头"><a href="#_004-带箭头" class="header-anchor">#</a> 004-带箭头</h2> <h3 id="球体带箭头"><a href="#球体带箭头" class="header-anchor">#</a> 球体带箭头</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token comment">//创建球体</span>
<span class="token keyword">var</span> myGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>IcosahedronBufferGeometry</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'darkgreen'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">,</span> myMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建箭头</span>
<span class="token comment">//表示原点方向，必须是单位向量</span>
<span class="token keyword">var</span> myDirection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//表示箭头原点位置</span>
<span class="token keyword">var</span> myOrigin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//表示箭头长度，默认值为1</span>
<span class="token keyword">var</span> myLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">//表示箭头颜色，默认值为0xffff00</span>
<span class="token keyword">var</span> myColor <span class="token operator">=</span> <span class="token number">0xff0000</span><span class="token punctuation">;</span>
<span class="token comment">//表示箭头头部长度，默认值为0.2 *myLength</span>
<span class="token keyword">var</span> myHeadLength <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token comment">//表示箭头头部宽度，默认值为0.2 * myHeadLength</span>
<span class="token keyword">var</span> myHeadWidth <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myArrowHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span>myDirection<span class="token punctuation">,</span> myOrigin<span class="token punctuation">,</span> myLength<span class="token punctuation">,</span> myColor<span class="token punctuation">,</span> myHeadLength<span class="token punctuation">,</span> myHeadWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myArrowHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染球体和箭头</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">+=</span> <span class="token number">0.02</span><span class="token punctuation">;</span>
  myArrowHelper<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">+=</span> <span class="token number">0.02</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-07.2d3fa2d5.png" alt="截屏2023-07-27 19.23.28"></p> <h3 id="多边形带箭头"><a href="#多边形带箭头" class="header-anchor">#</a> 多边形带箭头</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">100.23</span><span class="token punctuation">,</span> <span class="token number">98.92</span><span class="token punctuation">,</span> <span class="token number">99.18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建二十面体</span>
<span class="token keyword">var</span> myGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>IcosahedronGeometry</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建法向量材质</span>
<span class="token keyword">var</span> myMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">,</span> myMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//在每个面上显示法向量</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myGeometry<span class="token punctuation">.</span>faces<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> myFace <span class="token operator">=</span> myGeometry<span class="token punctuation">.</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//创建vector3，以找到每个面的中心</span>
  <span class="token keyword">var</span> myVector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//将该面的三个顶点索引传给vertices以找到其顶点的坐标</span>
  myVector<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span>myFace<span class="token punctuation">.</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myVector<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span>myFace<span class="token punctuation">.</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myVector<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span>myFace<span class="token punctuation">.</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myVector<span class="token punctuation">.</span><span class="token function">divideScalar</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//箭头辅助线，相当于把法向量用箭头表示出来</span>
  <span class="token keyword">var</span> myArrowHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span>
    myFace<span class="token punctuation">.</span>normal<span class="token punctuation">,</span> myVector<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myMesh<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myArrowHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染二十面体及箭头</span>
myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-08.01e1f33d.png" alt="截屏2023-07-27 19.29.10"></p> <h2 id="_005-自转和公转"><a href="#_005-自转和公转" class="header-anchor">#</a> 005-自转和公转</h2> <h3 id="中间大球自转-小球围着大球公转并且自转"><a href="#中间大球自转-小球围着大球公转并且自转" class="header-anchor">#</a> 中间大球自转，小球围着大球公转并且自转</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span>
                                           window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">3.9</span><span class="token punctuation">,</span> <span class="token number">60.18</span><span class="token punctuation">,</span> <span class="token number">15.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建大球</span>
<span class="token keyword">var</span> mySphereGeometry1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereBufferGeometry</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMaterial1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMesh1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mySphereGeometry1<span class="token punctuation">,</span> mySphereMaterial1<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySphereMesh1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建小球</span>
<span class="token keyword">var</span> mySphereGeometry2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereBufferGeometry</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMaterial2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMesh2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mySphereGeometry2<span class="token punctuation">,</span> mySphereMaterial2<span class="token punctuation">)</span><span class="token punctuation">;</span>
mySphereMesh2<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将小球与大球合成一个整体</span>
mySphereMesh1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySphereMesh2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染大球和小球的旋转</span>
<span class="token keyword">var</span> myStep <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//旋转小球与大球这个整体，公转</span>
  mySphereMesh1<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> myStep<span class="token punctuation">;</span>
  <span class="token comment">//旋转小球，自转</span>
  mySphereMesh2<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> myStep<span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="小球围着中心点公转并自转"><a href="#小球围着中心点公转并自转" class="header-anchor">#</a> 小球围着中心点公转并自转</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span>
                                           window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">3.9</span><span class="token punctuation">,</span> <span class="token number">60.18</span><span class="token punctuation">,</span> <span class="token number">15.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ImageUtils<span class="token punctuation">.</span><span class="token function">loadTexture</span><span class="token punctuation">(</span><span class="token string">&quot;images/img052.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> myMap<span class="token punctuation">;</span>
<span class="token comment">//创建不可见的旋转中心</span>
<span class="token keyword">var</span> myPivot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myPivot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建圆球</span>
<span class="token keyword">var</span> mySphereGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereBufferGeometry</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mySphereGeometry<span class="token punctuation">,</span> mySphereMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
mySphereMesh<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将圆球与旋转中心合成一个整体</span>
myPivot<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySphereMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染旋转运动</span>
<span class="token keyword">var</span> myStep <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//旋转整体(圆球与中心)，公转</span>
  myPivot<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> myStep<span class="token punctuation">;</span>
  <span class="token comment">//旋转圆球，自转</span>
  mySphereMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> myStep<span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="小球围着中心点公转并自转-光晕围着中心点转-使用相机自动旋转达到公转效果"><a href="#小球围着中心点公转并自转-光晕围着中心点转-使用相机自动旋转达到公转效果" class="header-anchor">#</a> 小球围着中心点公转并自转，光晕围着中心点转(使用相机自动旋转达到公转效果)</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myOrbitControls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span>myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
myOrbitControls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">//是否自动旋转</span>
myOrbitControls<span class="token punctuation">.</span>autoRotate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myOrbitControls<span class="token punctuation">.</span>autoRotateSpeed <span class="token operator">=</span> <span class="token number">2.5</span><span class="token punctuation">;</span>
<span class="token comment">//设置相机距离原点的最近距离</span>
myOrbitControls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//设置相机距离原点的最远距离</span>
myOrbitControls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token comment">//是否开启右键拖拽</span>
myOrbitControls<span class="token punctuation">.</span>enablePan <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myPointLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLight</span><span class="token punctuation">(</span><span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myPointLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myTextureLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap1 <span class="token operator">=</span> myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;images/lensflare0.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap2 <span class="token operator">=</span> myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;images/lensflare2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap3 <span class="token operator">=</span> myTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;images/lensflare3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myFlareColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myFlareColor<span class="token punctuation">.</span><span class="token function">setHSL</span><span class="token punctuation">(</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myLensFlare <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Lensflare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap1<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> myFlareColor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap2<span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap2<span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap2<span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap3<span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap3<span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap3<span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LensflareElement</span><span class="token punctuation">(</span>myMap3<span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myLensFlare<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>myPointLight<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myLensFlare<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建不可见的旋转中心</span>
<span class="token keyword">var</span> myPivot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myPivot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建圆球</span>
<span class="token keyword">var</span> mySphereGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereBufferGeometry</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mySphereMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>mySphereGeometry<span class="token punctuation">,</span> mySphereMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
mySphereMesh<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将圆球与旋转中心合成一个整体</span>
myPivot<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mySphereMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染圆球与光晕</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myOrbitControls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//更新轨道控制器</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="按轨道旋转-行星"><a href="#按轨道旋转-行星" class="header-anchor">#</a> 按轨道旋转（行星）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ImageUtils<span class="token punctuation">.</span><span class="token function">loadTexture</span><span class="token punctuation">(</span><span class="token string">&quot;images/img052.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> myMap<span class="token punctuation">;</span>
<span class="token comment">//创建旋转系统</span>
<span class="token keyword">var</span> myRotation <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">0.42</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">0.09</span><span class="token punctuation">,</span> <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myStarRadius <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myTrackRadius <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
<span class="token comment">//创建太阳系统</span>
<span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建行星轨道</span>
<span class="token keyword">var</span> myTrack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>RingGeometry</span><span class="token punctuation">(</span>myTrackRadius<span class="token punctuation">,</span> myTrackRadius <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建行星</span>
<span class="token keyword">var</span> myStar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span>myStarRadius<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ImageUtils<span class="token punctuation">.</span><span class="token function">loadTexture</span><span class="token punctuation">(</span><span class="token string">'images/img077.png'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myStar<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>myTrackRadius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myStar<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1.9</span><span class="token punctuation">;</span>
<span class="token comment">//创建行星环</span>
<span class="token keyword">var</span> myStarRing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>RingGeometry</span><span class="token punctuation">(</span>myStarRadius <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> myStarRadius <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ImageUtils<span class="token punctuation">.</span><span class="token function">loadTexture</span><span class="token punctuation">(</span><span class="token string">'images/img077.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">side</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>DoubleSide
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建行星环旋转中心</span>
myStarCenter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myStarCenter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myStarRing<span class="token punctuation">)</span><span class="token punctuation">;</span>
myStarCenter<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>myTrackRadius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myStarCenter<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
<span class="token comment">//创建太阳系中心</span>
<span class="token keyword">var</span> myCenter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCenter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myStar<span class="token punctuation">)</span><span class="token punctuation">;</span>
myCenter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myTrack<span class="token punctuation">)</span><span class="token punctuation">;</span>
myCenter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myStarCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>myRotation<span class="token punctuation">.</span>x<span class="token punctuation">,</span> myRotation<span class="token punctuation">.</span>y<span class="token punctuation">,</span> myRotation<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染旋转系统</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">-=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-09.69f6b103.png" alt="截屏2023-07-27 19.48.36"></p> <h2 id="_006-多个立方体只转动一个"><a href="#_006-多个立方体只转动一个" class="header-anchor">#</a> 006-多个立方体只转动一个</h2> <h3 id="mycube1的立方体旋转-2个立方体其中1个固定1个旋转"><a href="#mycube1的立方体旋转-2个立方体其中1个固定1个旋转" class="header-anchor">#</a> myCube1的立方体旋转（2个立方体其中1个固定1个旋转）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建第一个立方体</span>
<span class="token keyword">var</span> myGeometry1 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial1 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry1<span class="token punctuation">,</span> myMaterial1<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh1<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'myCube1'</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建第二个立方体</span>
<span class="token keyword">var</span> myGeometry2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial2 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry2<span class="token punctuation">,</span> myMaterial2<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh2<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'myCube2'</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染(旋转)立方体</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">getObjectByName</span><span class="token punctuation">(</span><span class="token string">'myCube1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mysecond的立方体旋转-3个立方体其中2个固定1个旋转"><a href="#mysecond的立方体旋转-3个立方体其中2个固定1个旋转" class="header-anchor">#</a> mySecond的立方体旋转（3个立方体其中2个固定1个旋转）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span>window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span>
                                           window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">40.06</span><span class="token punctuation">,</span><span class="token number">20.92</span><span class="token punctuation">,</span><span class="token number">42.68</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建第一个立方体</span>
<span class="token keyword">var</span> myGeometry1 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial1 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry1<span class="token punctuation">,</span> myMaterial1<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh1<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myGroup<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建第二个立方体</span>
<span class="token keyword">var</span> myGeometry2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial2 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry2<span class="token punctuation">,</span> myMaterial2<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh2<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh2<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'mySecond'</span><span class="token punctuation">;</span>
myGroup<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建第三个立方体</span>
<span class="token keyword">var</span> myGeometry3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial3 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry3<span class="token punctuation">,</span> myMaterial3<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh3<span class="token punctuation">.</span><span class="token function">translateX</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myGroup<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh3<span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染三个立方体</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//深度遍历所有子对象</span>
  myGroup<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//在所有子对象中，只有name是mySecond的对象围绕x轴旋转</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token operator">==</span><span class="token string">'mySecond'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
      <span class="token comment">//e.rotation.y += 0.01;</span>
      <span class="token comment">//e.rotation.z += 0.01;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_007-光照区域"><a href="#_007-光照区域" class="header-anchor">#</a> 007-光照区域</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span>gammaInput <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span>gammaOutput <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>myScene<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建红色矩形区域光源(本身不可见)</span>
<span class="token keyword">var</span> myRectAreaLight1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>RectAreaLight</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLight1<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLight1<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myRectAreaLight1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//绘制红色矩形区域光源的辅助矩形(即代表红色矩形区域光源)</span>
<span class="token keyword">var</span> myRectAreaLightMesh1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneBufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token literal-property property">side</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>BackSide <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLightMesh1<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> myRectAreaLight1<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
myRectAreaLightMesh1<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> myRectAreaLight1<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
myRectAreaLight1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myRectAreaLightMesh1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建白色矩形区域光源(本身不可见)</span>
<span class="token keyword">var</span> myRectAreaLight2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>RectAreaLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLight2<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLight2<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myRectAreaLight2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//绘制白色矩形区域光源的辅助矩形(即代表白色矩形区域光源)</span>
<span class="token keyword">var</span> myRectAreaLightMesh2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneBufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token literal-property property">side</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>BackSide <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRectAreaLightMesh2<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> myRectAreaLight2<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
myRectAreaLightMesh2<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> myRectAreaLight2<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
myRectAreaLight2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myRectAreaLightMesh2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//绘制接收平面</span>
<span class="token keyword">var</span> myPlaneMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
myPlaneMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myPlaneMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染矩形区域光源图形和平面</span>
myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-10.d703a402.png" alt="截屏2023-07-27 20.16.27"></p> <h2 id="_008-光照贴图到平面"><a href="#_008-光照贴图到平面" class="header-anchor">#</a> 008-光照贴图到平面</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建渲染器</span>
<span class="token keyword">var</span> myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#myContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCamera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0x444444</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//根据光照贴图创建平面图形</span>
<span class="token keyword">var</span> myPlaneGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myLightMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'images/img040.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'images/img007.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x777777</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">lightMap</span><span class="token operator">:</span> myLightMap<span class="token punctuation">,</span> 
  <span class="token literal-property property">map</span><span class="token operator">:</span> myMap
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//为了保证光照贴图能够正常显示，使用正常纹理的vu映射的值</span>
myPlaneGeometry<span class="token punctuation">.</span>faceVertexUvs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> myPlaneGeometry<span class="token punctuation">.</span>faceVertexUvs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myPlaneGeometry<span class="token punctuation">,</span> myMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
myMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">4.6</span><span class="token punctuation">;</span>
myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//渲染平面图形</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SpaceModel-11.1211a5a5.png" alt="截屏2023-07-27 20.21.08"></p> <h2 id="_009-三维的立方体-角度在大的立方体内"><a href="#_009-三维的立方体-角度在大的立方体内" class="header-anchor">#</a> 009-三维的立方体（角度在大的立方体内）</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">var</span> myRenderer<span class="token punctuation">,</span> myCamera<span class="token punctuation">,</span> myScene<span class="token punctuation">,</span> myOrbitControls<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">initRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xeeeeee</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span>
                                         window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myOrbitControls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span>myCamera<span class="token punctuation">,</span> myRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myScene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//创建天空盒作为场景背景</span>
  myScene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeTextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">'images/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'img091px.png'</span><span class="token punctuation">,</span> <span class="token string">'img091nx.png'</span><span class="token punctuation">,</span> <span class="token string">'img091py.png'</span><span class="token punctuation">,</span>
           <span class="token string">'img091ny.png'</span><span class="token punctuation">,</span> <span class="token string">'img091pz.png'</span><span class="token punctuation">,</span> <span class="token string">'img091nz.png'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">initModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//绘制三维坐标轴</span>
  <span class="token keyword">var</span> myAxesHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxesHelper</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myAxesHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//添加立方体</span>
  <span class="token keyword">var</span> myGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//使用场景背景作为环境贴图</span>
  myMaterial<span class="token punctuation">.</span>envMap <span class="token operator">=</span> myScene<span class="token punctuation">.</span>background<span class="token punctuation">;</span>
  myScene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>myGeometry<span class="token punctuation">,</span> myMaterial<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  myOrbitControls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  myRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myScene<span class="token punctuation">,</span> myCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">initRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">initModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_010"><a href="#_010" class="header-anchor">#</a> 010-</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/three.js/SimpleFont.html" class="prev">
        简单字体
      </a></span> <span class="next"><a href="/three.js/SpecialEffects.html">
        特效效果
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8914b41c.js" defer></script><script src="/assets/js/3.7f8ab6bd.js" defer></script><script src="/assets/js/10.12b4bf37.js" defer></script>
  </body>
</html>
