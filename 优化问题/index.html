<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>优化 | Liang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.64852305.css" as="style"><link rel="preload" href="/assets/js/app.8914b41c.js" as="script"><link rel="preload" href="/assets/js/3.7f8ab6bd.js" as="script"><link rel="preload" href="/assets/js/15.df2ae387.js" as="script"><link rel="prefetch" href="/assets/js/10.12b4bf37.js"><link rel="prefetch" href="/assets/js/11.986ec194.js"><link rel="prefetch" href="/assets/js/12.127689ae.js"><link rel="prefetch" href="/assets/js/13.528417d2.js"><link rel="prefetch" href="/assets/js/14.ccd1b44f.js"><link rel="prefetch" href="/assets/js/16.7bbe874c.js"><link rel="prefetch" href="/assets/js/17.4b65eca3.js"><link rel="prefetch" href="/assets/js/18.b4f5604c.js"><link rel="prefetch" href="/assets/js/19.ada119ee.js"><link rel="prefetch" href="/assets/js/2.f7dde802.js"><link rel="prefetch" href="/assets/js/20.d063279a.js"><link rel="prefetch" href="/assets/js/21.d15b3ac7.js"><link rel="prefetch" href="/assets/js/22.5185a1a5.js"><link rel="prefetch" href="/assets/js/23.91b5f7c4.js"><link rel="prefetch" href="/assets/js/24.545bc1fb.js"><link rel="prefetch" href="/assets/js/25.ce0688e9.js"><link rel="prefetch" href="/assets/js/26.14f7ddb2.js"><link rel="prefetch" href="/assets/js/27.1d380883.js"><link rel="prefetch" href="/assets/js/28.84fd7342.js"><link rel="prefetch" href="/assets/js/29.977a10c6.js"><link rel="prefetch" href="/assets/js/30.e27d5c6c.js"><link rel="prefetch" href="/assets/js/31.fef44b40.js"><link rel="prefetch" href="/assets/js/32.3cde5ab7.js"><link rel="prefetch" href="/assets/js/33.2fd0f2f0.js"><link rel="prefetch" href="/assets/js/34.6174b407.js"><link rel="prefetch" href="/assets/js/35.3457d0d3.js"><link rel="prefetch" href="/assets/js/36.c672256a.js"><link rel="prefetch" href="/assets/js/37.c5336199.js"><link rel="prefetch" href="/assets/js/38.f878aa15.js"><link rel="prefetch" href="/assets/js/39.7272608e.js"><link rel="prefetch" href="/assets/js/4.591798d0.js"><link rel="prefetch" href="/assets/js/40.1f5087ab.js"><link rel="prefetch" href="/assets/js/41.d8defd1f.js"><link rel="prefetch" href="/assets/js/42.4decf61e.js"><link rel="prefetch" href="/assets/js/43.1f54a9fb.js"><link rel="prefetch" href="/assets/js/44.05628c46.js"><link rel="prefetch" href="/assets/js/45.b64569a4.js"><link rel="prefetch" href="/assets/js/46.3e758616.js"><link rel="prefetch" href="/assets/js/47.754e4534.js"><link rel="prefetch" href="/assets/js/48.d7707287.js"><link rel="prefetch" href="/assets/js/49.c62b8419.js"><link rel="prefetch" href="/assets/js/5.ae5a8b30.js"><link rel="prefetch" href="/assets/js/50.60fbaa68.js"><link rel="prefetch" href="/assets/js/51.812c8fc9.js"><link rel="prefetch" href="/assets/js/52.bae4e31b.js"><link rel="prefetch" href="/assets/js/53.bdcc492b.js"><link rel="prefetch" href="/assets/js/54.c9eece36.js"><link rel="prefetch" href="/assets/js/55.bec15e04.js"><link rel="prefetch" href="/assets/js/56.3e4a4b07.js"><link rel="prefetch" href="/assets/js/57.300f3929.js"><link rel="prefetch" href="/assets/js/58.9b3bc2f8.js"><link rel="prefetch" href="/assets/js/59.b4f2f65a.js"><link rel="prefetch" href="/assets/js/6.c6d5d1da.js"><link rel="prefetch" href="/assets/js/60.6da1c705.js"><link rel="prefetch" href="/assets/js/61.0f431e1e.js"><link rel="prefetch" href="/assets/js/62.ca980bdb.js"><link rel="prefetch" href="/assets/js/63.b1d0e0d0.js"><link rel="prefetch" href="/assets/js/64.a5dc88b1.js"><link rel="prefetch" href="/assets/js/65.2134e59f.js"><link rel="prefetch" href="/assets/js/66.2ce26325.js"><link rel="prefetch" href="/assets/js/67.be6c5ba6.js"><link rel="prefetch" href="/assets/js/68.5ee46489.js"><link rel="prefetch" href="/assets/js/69.817ef5b5.js"><link rel="prefetch" href="/assets/js/7.39a2feef.js"><link rel="prefetch" href="/assets/js/70.bd026d5e.js"><link rel="prefetch" href="/assets/js/71.94cd51c9.js"><link rel="prefetch" href="/assets/js/72.2852256c.js"><link rel="prefetch" href="/assets/js/73.ff13867e.js"><link rel="prefetch" href="/assets/js/74.d43a4484.js"><link rel="prefetch" href="/assets/js/75.8a138783.js"><link rel="prefetch" href="/assets/js/76.75869419.js"><link rel="prefetch" href="/assets/js/77.85ccf9b3.js"><link rel="prefetch" href="/assets/js/78.d1f93c97.js"><link rel="prefetch" href="/assets/js/79.476c7345.js"><link rel="prefetch" href="/assets/js/8.6aa44381.js"><link rel="prefetch" href="/assets/js/80.75df788e.js"><link rel="prefetch" href="/assets/js/81.8dabfdfb.js"><link rel="prefetch" href="/assets/js/82.b373d124.js"><link rel="prefetch" href="/assets/js/83.543e5130.js"><link rel="prefetch" href="/assets/js/84.551d04d7.js"><link rel="prefetch" href="/assets/js/85.21a99aad.js"><link rel="prefetch" href="/assets/js/9.ab9a5c08.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64852305.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Liang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  vuepress
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/插件小技巧/" class="nav-link">
  插件小技巧
</a></li><li class="dropdown-item"><!----> <a href="/前端问题/" class="nav-link">
  前端问题
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue问题
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react问题
</a></li><li class="dropdown-item"><!----> <a href="/优化问题/" class="nav-link">
  优化问题
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/regular&amp;git/regular/" class="nav-link">
  正则&amp;git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="画图小软件" class="dropdown-title"><span class="title">画图小软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="画图小软件" class="mobile-dropdown-title"><span class="title">画图小软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/three.js/" class="nav-link">
  three.js
</a></li><li class="dropdown-item"><!----> <a href="/eChart/" class="nav-link">
  eChart
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qiankun/" class="nav-link">
  qiankun
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/progress/" class="nav-link">
  记录问题
</a></li><li class="dropdown-item"><!----> <a href="/小案例/" class="nav-link">
  小案例
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/Lchu3/lchushan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  vuepress
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/插件小技巧/" class="nav-link">
  插件小技巧
</a></li><li class="dropdown-item"><!----> <a href="/前端问题/" class="nav-link">
  前端问题
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue问题
</a></li><li class="dropdown-item"><!----> <a href="/react/" class="nav-link">
  react问题
</a></li><li class="dropdown-item"><!----> <a href="/优化问题/" class="nav-link">
  优化问题
</a></li><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/regular&amp;git/regular/" class="nav-link">
  正则&amp;git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="画图小软件" class="dropdown-title"><span class="title">画图小软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="画图小软件" class="mobile-dropdown-title"><span class="title">画图小软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/three.js/" class="nav-link">
  three.js
</a></li><li class="dropdown-item"><!----> <a href="/eChart/" class="nav-link">
  eChart
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微前端" class="dropdown-title"><span class="title">微前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="微前端" class="mobile-dropdown-title"><span class="title">微前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qiankun/" class="nav-link">
  qiankun
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/progress/" class="nav-link">
  记录问题
</a></li><li class="dropdown-item"><!----> <a href="/小案例/" class="nav-link">
  小案例
</a></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/Lchu3/lchushan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/" aria-current="page" class="active sidebar-link">优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#记录一次前端优化首屏时间-70-的优化过程" class="sidebar-link">记录一次前端优化首屏时间 70% 的优化过程~</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#项目背景" class="sidebar-link">项目背景</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#方向" class="sidebar-link">方向</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#开始发力" class="sidebar-link">开始发力</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#效果如何" class="sidebar-link">效果如何？</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#请列举的前端性能优化" class="sidebar-link">请列举的前端性能优化</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#浅谈渲染机制" class="sidebar-link">浅谈渲染机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#网络" class="sidebar-link">网络</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#渲染引擎及关键渲染路径-critical-rendering-path" class="sidebar-link">渲染引擎及关键渲染路径（Critical Rendering Path）</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#重排-重绘" class="sidebar-link">重排&amp;&amp;重绘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#重排" class="sidebar-link">重排</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#重绘-repaint" class="sidebar-link">重绘(repaint)</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#性能优化" class="sidebar-link">性能优化</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#防抖-节流" class="sidebar-link">防抖&amp;&amp;节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#防抖-debounce" class="sidebar-link">防抖（debounce）</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#节流-throttle" class="sidebar-link">节流（throttle）</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#cookies-、-sessionstorage和localstorage" class="sidebar-link">cookies 、 sessionStorage和localstorage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#三者之间的差异" class="sidebar-link">三者之间的差异</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#token储存" class="sidebar-link">Token储存</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#怎么禁止让js读取cookie-怎么让cookie只在https下传输" class="sidebar-link">怎么禁止让js读取cookie？怎么让cookie只在HTTPS下传输？</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#客户端缓存" class="sidebar-link">客户端缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#客户端缓存-2" class="sidebar-link">客户端缓存</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#浏览器为什么要阻止跨域请求" class="sidebar-link">浏览器为什么要阻止跨域请求?</a></li><li class="sidebar-sub-header"><a href="/%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98/#如何解决跨域" class="sidebar-link">如何解决跨域?</a></li></ul></li></ul></li><li><a href="/优化问题/tips.html" class="sidebar-link">小技巧</a></li><li><a href="/优化问题/deploy.html" class="sidebar-link">相关问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h1> <h2 id="记录一次前端优化首屏时间-70-的优化过程"><a href="#记录一次前端优化首屏时间-70-的优化过程" class="header-anchor">#</a> 记录一次前端优化首屏时间 70% 的优化过程~</h2> <h3 id="项目背景"><a href="#项目背景" class="header-anchor">#</a> 项目背景</h3> <p>中小项目， vue2</p> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <p>缩短白屏时间，用户能够更快的看到我的页面！</p> <blockquote><p>白屏时间：从打开页面到看到页面，中间白屏停留的时间。</p></blockquote> <h3 id="方向"><a href="#方向" class="header-anchor">#</a> 方向</h3> <p>1.减少资源体积，从而缩短请求时间</p> <p>2.减少资源请求个数，从而缩短等待时间</p> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <h4 id="如何知道打包体积"><a href="#如何知道打包体积" class="header-anchor">#</a> 如何知道打包体积？</h4> <p>打包构建的时候，使用--report命令：</p> <div class="language- extra-class"><pre class="language-text"><code>npm run build --report
</code></pre></div><p>打包结束后，会在dist目录里面生成一个report html文件，里面会显示你打包体积分布情况，可以根据项目情况，侧重优化。</p> <p>大概长这样（图片来自网络，并非我项目实际情况）</p> <p><img src="/assets/img/640.b94b70bc.jpeg" alt="640"></p> <h4 id="如何知道打包速度"><a href="#如何知道打包速度" class="header-anchor">#</a> 如何知道打包速度</h4> <p>有的人可以通过--progress查看到打包耗时，但是对于我项目无用，使用<strong>ProgressBarPlugin</strong>插件解决</p> <div class="language- extra-class"><pre class="language-text"><code>config.plugins.push(new ProgressBarPlugin())}
</code></pre></div><h3 id="开始发力"><a href="#开始发力" class="header-anchor">#</a> 开始发力</h3> <h4 id="_0-删除你没用到的代码"><a href="#_0-删除你没用到的代码" class="header-anchor">#</a> 0.删除你没用到的代码</h4> <p>在webpack里加上下面插件，每次serve的时候，会生成一个json文件，里面会显示你没用到的文件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'uselessFile'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UselessFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  <span class="token literal-property property">root</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     
  <span class="token literal-property property">out</span><span class="token operator">:</span><span class="token string">'./fileList.json'</span><span class="token punctuation">,</span>     
  <span class="token literal-property property">clean</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>       
  <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_1-让没有按需引入的库按需引入"><a href="#_1-让没有按需引入的库按需引入" class="header-anchor">#</a> 1.让没有按需引入的库按需引入</h4> <p>比如：lodash</p> <p>之前的引入方式：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> lodash <span class="token keyword">from</span> <span class="token string">'lodash'</span>
</code></pre></div><p>使用按需引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> find <span class="token keyword">from</span> 'lodash<span class="token operator">/</span>find
</code></pre></div><p>打包体积少了很多...</p> <h4 id="_2-引入一个库最小的资源"><a href="#_2-引入一个库最小的资源" class="header-anchor">#</a> 2.引入一个库最小的资源</h4> <p>举个例子，有一个库叫a，我们一般引入方式为</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> a <span class="token keyword">from</span> <span class="token string">'a'</span>
</code></pre></div><p>我们可以去node_modules里面搜索查看一下资源的大小，有么有a.min.js 或者是 a.min.min.js，找个体积最小的！</p> <p>比如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> vis <span class="token keyword">from</span> <span class="token string">'vis-network'</span>
</code></pre></div><p>改成</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> vis <span class="token keyword">from</span> <span class="token string">'vis-network/dist/vis-network.min'</span>
</code></pre></div><p>打包体积少了很多...</p> <h4 id="_3-替换更小的库"><a href="#_3-替换更小的库" class="header-anchor">#</a> 3.替换更小的库</h4> <p>比如：moment</p> <p>刚开始我参考了网上的方案，在webpack里面配置，忽略不会使用到的moment部分，从而达到减少打包体积的效果：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>webpack<span class="token punctuation">.</span><span class="token function">IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.\/locale$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>成功让打包出来的moment体积从600多k降到了160多k，成果非常显著！</p> <p>但是想着100多k对于我只使用了简单的时间函数来说，还是很大了，后来：</p> <blockquote><p>抛弃moment，使用<strong>dayjs</strong>！</p></blockquote> <p>然后打包出来只有6k！！！6K！！！</p> <h4 id="_4-开启gzip"><a href="#_4-开启gzip" class="header-anchor">#</a> 4.开启Gzip</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> productionGzipExtensions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span><span class="token string">'css'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> gzipCompressPlugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[path].gz[query]'</span><span class="token punctuation">,</span>     
    <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">'gzip'</span><span class="token punctuation">,</span>       
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\.('</span> <span class="token operator">+</span> productionGzipExtensions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')$'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">minRatio</span><span class="token operator">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>   
config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>gzipCompressPlugin<span class="token punctuation">)</span> 
</code></pre></div><h4 id="_5-生产环境删除console等"><a href="#_5-生产环境删除console等" class="header-anchor">#</a> 5.生产环境删除console等</h4> <p>注意，安装<code>terser-webpack-plugin</code>版本要注意与你webpack的对应，不然会安装失败哦！我使用的是4.2.3</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">let</span> terserOption <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>            
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>        
  <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>    
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>           
  <span class="token literal-property property">mangle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>   
     <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             
     <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        
     <span class="token literal-property property">pure_funcs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'console.log'</span><span class="token punctuation">]</span> 
 <span class="token punctuation">}</span>
 <span class="token punctuation">)</span><span class="token punctuation">}</span>
 config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>terserOption<span class="token punctuation">)</span>  
</code></pre></div><h4 id="_6-生产关闭sourcemap"><a href="#_6-生产关闭sourcemap" class="header-anchor">#</a> 6.生产关闭sourcemap</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">productionSourceMap</span><span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h4 id="_7-删除prefetch"><a href="#_7-删除prefetch" class="header-anchor">#</a> 7.删除prefetch</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;prefetch&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>删除了这个，首次加载时间优化了好多...</p> <h3 id="效果如何"><a href="#效果如何" class="header-anchor">#</a> 效果如何？</h3> <p>首次加载速度优化70%</p> <p>打包体积优化60%</p> <p>持续优化中...</p> <h2 id="请列举的前端性能优化"><a href="#请列举的前端性能优化" class="header-anchor">#</a> 请列举的前端性能优化</h2> <p><img src="/assets/img/image-20210531163900000.d3a43b27.png" alt="image-20210531163900000"></p> <h2 id="浅谈渲染机制"><a href="#浅谈渲染机制" class="header-anchor">#</a> 浅谈渲染机制</h2> <h4 id="浏览器基础结构主要包括如下7部分"><a href="#浏览器基础结构主要包括如下7部分" class="header-anchor">#</a> 浏览器基础结构主要包括如下7部分：</h4> <ol><li>用户界面（User Interface）:用户所看到及与之交互的功能组件，如地址栏，返回，前进按钮等；</li> <li>浏览器引擎（Browser engine）:负责控制和管理下一级的渲染引擎；</li> <li>渲染引擎（Rendering engine）:负责解析用户请求的内容（如HTML或XML，渲染引擎会解析HTML或XML，以及相关CSS，然后返回解析后的内容）；</li> <li>网络（Networking）:负责处理网络相关的事务，如HTTP请求等；</li> <li><code>UI</code>后端（<code>UI backend</code>）:负责绘制提示框等浏览器组件，其底层使用的是操作系统的用户接口；</li> <li>JavaScript解释器（JavaScript interpreter）:负责解析和执行JavaScript代码；</li> <li>数据存储（Data storage）:负责持久存储诸如cookie和缓存等应用数据。</li></ol> <p><img src="/assets/img/image-20210525102933796.a6852aff.png" alt="image-20210525102933796"></p> <h3 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h3> <p>当用户访问页面时，浏览器需要获取用户请求内容，这个过程主要涉及浏览器网络模块：</p> <ul><li>1.用户在地址栏输入域名，如<a href="https://link.zhihu.com/?target=http%3A//baidu.com" target="_blank" rel="noopener noreferrer">http://baidu.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<code>DNS</code>（<code>Domain Name System</code>，域名解析系统）服务器根据输入的域名查找对应<code>IP</code>，然后向该<code>IP</code>地址发起请求；</li></ul> <p><img src="https://pic2.zhimg.com/80/v2-150ac1bbe21fc817f45d062b35723ef9_720w.png" alt="img"></p> <ul><li>2.浏览器获得并解析服务器的返回内容(HTTP response)；</li> <li>3.浏览器加载HTML文件及文件内包含的外部引用文件及图片，多媒体等资源。</li></ul> <h4 id="dns预解析-dns-prefetch"><a href="#dns预解析-dns-prefetch" class="header-anchor">#</a> <code>DNS</code>预解析（<code>DNS prefetch</code>）</h4> <p>浏览器<code>DNS</code>解析大多时候较快，且会缓存常用域名的解析值，但是如果网站涉及多域名，在对每一个域名访问时都需要先解析出IP地址，而我们希望在跳转或者请求其他域名资源时尽量快，则可以开启域名预解析，浏览器会在空闲时提前解析声明需要预解析的</p> <p><img src="https://pic4.zhimg.com/80/v2-5b8adcae27c71453716ecb96c891bd3f_720w.png" alt="img"></p> <h4 id="多进程"><a href="#多进程" class="header-anchor">#</a> 多进程</h4> <p>我们通常说JavaScript执行是单进程的，但是浏览器网络部分通常是有几个平行进程同时开启，但是也会有
限制，一般为2-6个。</p> <h3 id="渲染引擎及关键渲染路径-critical-rendering-path"><a href="#渲染引擎及关键渲染路径-critical-rendering-path" class="header-anchor">#</a> 渲染引擎及关键渲染路径（Critical Rendering Path）</h3> <p>渲染引擎所做的事是将请求内容展现给我们，默认支持HTML,XML和图片类型，对于其他诸如<code>PDF</code>等类型的内容则需要安装相应插件，但浏览器的展示工作流程基本是一样的。</p> <p>通过网络模块加载到HTML文件后渲染引擎渲染流程如下，这也通常被称作关键渲染路径（Critical Rendering Path）：</p> <ul><li><p>1.构建DOM树(DOM tree)：从上到下解析HTML文档生成DOM节点树（DOM tree），也叫内容树（content tree）；</p></li> <li><p>2.构建<code>CSSOM</code>(<code>CSS Object Model</code>)树：加载解析样式生成<code>CSSOM</code>树；</p></li> <li><p>3.执行<code>JavaScript</code>：加载并执行JavaScript代码（包括内联代码或外联JavaScript文件）；</p></li> <li><p>4.构建渲染树(render tree)：根据DOM树和<code>CSSOM</code>树,生成渲染树(render tree)；</p> <p>渲染树：按顺序展示在屏幕上的一系列矩形，这些矩形带有字体，颜色和尺寸等视觉属性。</p></li> <li><p>5.布局（<code>layout</code>）：根据渲染树将节点树的每一个节点布局在屏幕上的正确位置；</p></li> <li><p>6.绘制（<code>painting</code>）：遍历渲染树绘制所有节点，为每一个节点适用对应的样式，这一过程是通过UI后端模块完成；</p> <p><img src="/assets/img/image-20210525104100000.0b66ed45.png" alt="img"></p> <p>为了更友好的用户体验，浏览器会尽可能快的展现内容，而不会等到文档所有内容到达才开始解析和构建/布局渲染树，而是每次处理一部分，并展现在屏幕上，这也是为什么我们经常可以看到页面加载的时候内容是从上到下一点一点展现的。</p></li></ul> <h4 id="流程图"><a href="#流程图" class="header-anchor">#</a> 流程图</h4> <p><code>Webkit</code>渲染引擎流程如下图：</p> <p><img src="https://pic2.zhimg.com/80/v2-219c89392774bcc81bac826f8e51cccd_720w.png" alt="img"></p> <p><code>Gecko</code>渲染引擎流程如下图：</p> <p><img src="https://pic2.zhimg.com/80/v2-80490884d25b17bcf0b4d54a716c8add_720w.jpg" alt="img"></p> <p>如上图，<code>Webkit</code>浏览器和Gecko浏览器渲染流程大致相同,不同的是：</p> <ul><li>1.<code>Webkit</code>浏览器中的渲染树(<code>render tree</code>)，在Gecko浏览器中对应的则是框架树（<code>frame tree</code>）,渲染对象(<code>render object</code>)对应的是框架（<code>frame</code>）;</li> <li>2.<code>Webkit</code>中的布局（<code>Layout</code>）过程，在Gecko中称为回流（<code>Reflow</code>）,本质是一样的，后文会解释回流的另一层含义–重新布局；</li> <li>3.<code>Gecko</code>中HTML和DOM树中间多了一层内容池（<code>Content sink</code>）,可以理解成生成DOM元素的工厂。</li></ul> <h2 id="重排-重绘"><a href="#重排-重绘" class="header-anchor">#</a> 重排&amp;&amp;重绘</h2> <h3 id="重排"><a href="#重排" class="header-anchor">#</a> 重排</h3> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> 概念：</h4> <p>当更新了元素的几何属性，那么浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排，也称为“回流”。</p> <p>例如我们通过<code>JS</code>或<code>CSS</code>修改了元素的宽度和高度，那么浏览器会触发重新布局，解析之后的一系列子阶段，这个过程就叫重排。</p> <p>渲染树的节点发生改变，影响了该节点的几何属性，导致该节点位置发生变化，此时就会触发浏览器重排并重新生成渲染树。重排意味着节点的几何属性改变，需重新计算并生成渲染树，导致渲染树的全部或部分发生变化。</p> <p>重排需要更新完整的渲染流水线，所以开销也是最大的。</p> <h4 id="常见的引起重排属性和方法"><a href="#常见的引起重排属性和方法" class="header-anchor">#</a> 常见的引起重排属性和方法</h4> <p>任何会改变元素的位置和尺寸大小的操作，都会触发重排。常见的例子如下：</p> <ul><li>添加或删除可见的DOM元素</li> <li>元素尺寸改变</li> <li>内容变化，比如在input框中输入文字</li> <li>浏览器窗口尺寸改变</li> <li>计算<code>offsetTop</code>、<code>offsetLeft</code>等布局信息</li> <li>设置style属性的值</li> <li>激活<code>CSS</code>伪类，例如 :<code>hover</code></li> <li>查询某些属性或调用某些方法</li></ul> <h4 id="几何属性"><a href="#几何属性" class="header-anchor">#</a> 几何属性</h4> <p>几何属性：包括布局、尺寸等可用数学几何衡量的属性。</p> <ul><li>布局：<code>display、float、position、list、table、flex、columns、grid</code></li> <li>尺寸：<code>margin、padding、border、width、height</code></li></ul> <h4 id="获取布局信息的属性或方法"><a href="#获取布局信息的属性或方法" class="header-anchor">#</a> 获取布局信息的属性或方法</h4> <p>获取布局信息的属性如下：</p> <ul><li><code>offsetTop、offsetLeft、offsetWidth、offsetHeight</code></li> <li><code>scrollTop、scrollLeft、scrollWidth、scrollHeight</code></li> <li><code>clientTop、clientLeft、clientWidth、clientHeight</code></li> <li><code>getComputedStyle()</code></li> <li><code>getBoundingClientRect()</code></li></ul> <p>看到这里有的人可能会疑惑，我们只是获取这些属性值，并没有改变它，为什么会触发重排？</p> <p>现代的浏览器都是很聪明的，由于每次重排都会造成额外的计算消耗，因此大多数浏览器都会通过队列化修改并批量执行来优化重排过程。浏览器会将修改操作放入到队列里，直到过了一段时间或者操作达到了一个阈值，才清空队列。但是！当你获取布局信息的操作的时候，会<strong>强制清空队列</strong>，因为队列中，可能会有影响到这些值的操作，为了给我们最精确的值，浏览器会立即重排+重绘。</p> <p>所以我们应避免频繁使用上述的属性。</p> <h4 id="重排的影响范围"><a href="#重排的影响范围" class="header-anchor">#</a> 重排的影响范围</h4> <p>浏览器渲染界面是基于流式布局模型的，所以触发重排时会对周围的DOM重新排列，影响的范围分两种：</p> <h3 id="重绘-repaint"><a href="#重绘-repaint" class="header-anchor">#</a> 重绘(repaint)</h3> <h4 id="概念-2"><a href="#概念-2" class="header-anchor">#</a> 概念</h4> <p>更新了元素的绘制属性，但没有改变布局，重新把元素外观绘制出来的过程叫做重绘。例如更改某些元素的背景颜色。</p> <p>重绘并没有引起元素几何属性的改变，所以就直接进入绘制阶段，然后执行之后的一系列子阶段。</p> <p>和重排相比，重绘省去了布局和分层阶段，所以执行效率会比重排操作要高一些。</p> <p>重排一定会伴随重绘，重绘却不一定伴随重排。</p> <h4 id="外观属性"><a href="#外观属性" class="header-anchor">#</a> 外观属性</h4> <p>包括界面、文字等可用状态向量描述的属性</p> <ul><li>界面：<code>appearance、outline、background、mask、box-shadow、box-reflect、filter、opacity、clip、border-radius、background-size、visibility</code></li> <li>文字：<code>text、font、word</code></li></ul> <h3 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h3> <p>重排和重绘在操作节点样式时频繁出现，同时也存在很大程度上的性能问题。重排成本比重绘成本高得多，因为一个节点的重排可能导致子节点、兄弟节点或祖先节点的重排，所以我们要尽可能减少重排次数、重排范围。</p> <h4 id="使用visibility-hidden替换display-none"><a href="#使用visibility-hidden替换display-none" class="header-anchor">#</a> 使用<code>visibility:hidden</code>替换<code>display:none</code></h4> <p>通过下面四个方面来看看两者有什么区别：</p> <ul><li><p>占位表现</p></li> <li><ul><li><code>display:none</code>：不占据空间</li> <li><code>visibility:hidden</code>：占据空间</li></ul></li> <li><p>触发影响</p></li> <li><ul><li><code>display:none</code>：触发重排重绘</li> <li><code>visibility:hidden</code>：触发重绘</li></ul></li> <li><p>过渡影响</p></li> <li><ul><li><code>display:none</code>：影响过渡不影响动画</li> <li><code>visibility:hidden</code>：过渡和动画都不影响</li></ul></li> <li><p>株连效果</p></li> <li><ul><li><code>display:none</code>：自身及其子节点全都不可见</li> <li><code>visibility:hidden</code>：自身及其子节点都不可见，但可声明子节点<code>visibility:visible</code>单独显示</li></ul></li></ul> <h4 id="避免使用table布局"><a href="#避免使用table布局" class="header-anchor">#</a> 避免使用Table布局</h4> <p>Table布局可能很小的一个改动就会造成整个table重排。</p> <p>通常可用 <code>ul、li、span</code>等标签取代 table 系列标签生成表格</p> <h4 id="避免设置多层内联样式"><a href="#避免设置多层内联样式" class="header-anchor">#</a> 避免设置多层内联样式</h4> <p>浏览器的<code>CSS</code>解析器解析<code>css</code>文件时，对<code>CSS</code>规则是从右到左匹配查找，样式层级过多会影响重排重绘效率。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">span</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">div &gt; a &gt; span</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.baidu.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>百度搜索<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对于第一种设置样式的方式来说，浏览器只需要找到页面中所有的 span 标签然后设置颜色，但是对于第二种设置样式的方式来说，浏览器首先需要找到所有的 span 标签，然后找到 span 标签上的 a 标签，最后再去找到 div 标签，然后给符合这种条件的 span 标签设置颜色，这样的递归过程就很复杂。所以我们应该尽可能的避免写过于具体的 CSS 选择器，然后对于 HTML 来说也尽量少的添加无意义标签，保证层级扁平。</p> <h4 id="将频繁重绘或重排的节点设置为图层"><a href="#将频繁重绘或重排的节点设置为图层" class="header-anchor">#</a> 将频繁重绘或重排的节点设置为图层</h4> <p>上一篇文章中我们构建完布局树之后，我们会进行分层，将页面分为很多个图层，如果不对图层添加关联，图层之间是不会相互影响的。</p> <p>因此，在浏览器中将频繁重排或重绘的节点设置为一张新图层，那么新图层就能够阻止节点的渲染行为影响别的节点。</p> <p>设置新图层的方法：</p> <ul><li>将节点设置为<code>video</code>或<code>iframe</code></li> <li>为节点添加 <code>will-change</code> 属性</li></ul> <h4 id="使用requestanimationframe作为动画帧"><a href="#使用requestanimationframe作为动画帧" class="header-anchor">#</a> 使用<code>requestAnimationFrame</code>作为动画帧</h4> <p>动画速度越快，重排次数越多，浏览器刷新频率为<code>60Hz</code>，即每<code>16.6ms</code>更新一次，而<code>requestAnimationFrame()</code>正是以<code>16.6ms</code>的速度更新一次。所以可用<code>requestAnimationFrame()</code>代替<code>setInterval()</code>。</p> <h4 id="对于复杂动画效果-使用绝对定位让其脱离文档流"><a href="#对于复杂动画效果-使用绝对定位让其脱离文档流" class="header-anchor">#</a> 对于复杂动画效果,使用绝对定位让其脱离文档流</h4> <p>对于复杂动画效果，由于会经常的引起重排重绘，因此，我们可以使用绝对定位，让它脱离文档流。否则会引起父元素以及后续元素频繁的重排。</p> <h4 id="动态改变类而不改变样式"><a href="#动态改变类而不改变样式" class="header-anchor">#</a> 动态改变类而不改变样式</h4> <p>不要尝试每次操作DOM去改变节点样式，这样会频繁触发重排。</p> <p>更好的方式是使用新的类名预定义节点样式，在执行逻辑操作时收集并确认最终更换的类名集合，在适合时机一次性动态替换原来的类名集合。</p> <p>具体的实现可以看下HTML DOM元素属性 <code>classList</code>。</p> <h4 id="避免触发同步布局事件"><a href="#避免触发同步布局事件" class="header-anchor">#</a> 避免触发同步布局事件</h4> <p>先来看下面的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> top <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上文我们说过，当我们访问元素的一些属性的时候，会导致浏览器强制清空队列，进行强制同步布局。</p> <p>上面代码中每次循环操作DOM都会发生重排，应该在循环外使用变量保存一些不会变化的DOM映射值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> top <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="批量修改dom"><a href="#批量修改dom" class="header-anchor">#</a> 批量修改DOM</h4> <p>当我们需要对DOM对一系列修改的时候，可以通过以下步骤减少重排重绘次数：</p> <ul><li>使元素脱离文档流</li> <li>对其进行多次修改</li> <li>将元素带回到文档中。</li></ul> <p>该过程的第一步和第三步可能会引起重排，但是经过第一步之后，对DOM的所有修改都不会引起重排，因为它已经不在渲染树了。</p> <p>有三种方式可以让DOM脱离文档流：</p> <ul><li>隐藏要操作的<code>dom</code> 在要操作<code>dom</code>之前，通过<code>display</code>隐藏<code>dom</code>，当操作完成之后，再将<code>dom</code>的<code>display</code>属性置为可见，因为不可见的元素不会触发重排和重绘。</li> <li>通过使用<code>DocumentFragment</code>创建一个<code>dom</code>碎片，在它上面批量操作<code>dom</code>，操作完成之后，再添加到文档中，这样只会触发一次重排。</li> <li>复制节点，在副本上工作，然后替换它。</li></ul> <blockquote><p>当然我们也可以使用框架来实现批量修改DOM，比如<code>Vue、React</code>。</p></blockquote> <h4 id="css3硬件加速-gpu加速"><a href="#css3硬件加速-gpu加速" class="header-anchor">#</a> <code>CSS3</code>硬件加速（<code>GPU</code>加速）</h4> <p>使用<code>CSS3</code>硬件加速，可以让 <code>transform</code>、<code>opacity</code>、<code>filters</code>这些动画不会引起重拍重绘，但对于动画的其它属性，比如<code>background-color</code>这些，还是会引起重排重绘的，不过它还是可以提升这些动画的性能。</p> <p>常见的触发<code>CSS3</code>硬件加速的<code>CSS</code>属性有：</p> <ul><li>transform</li> <li>opacity</li> <li>filters</li> <li>will-change</li></ul> <p><strong>启动硬件加速注意点：</strong></p> <ul><li>如果为太多元素使用<code>CSS3</code>硬件加速，会导致内存占用较大，也会从另一方面导致性能问题</li> <li>在<code>GPU</code>渲染字体会导致抗锯齿无效。这是因为<code>GPU</code>和<code>CPU</code>的算法不同。因此如果你不在动画结束的时候关闭硬件加速，会产生字体模糊。</li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>通过上面的学习，我们可以总结出以下几点：</p> <ul><li>重排是因为元素的几何属性更改触发的</li> <li>重绘是由于元素的绘制属性更改触发的</li> <li>触发重排也一定会触发重绘，触发重绘不一定会触发重排</li> <li>重排的成本高于重绘</li> <li>减少重排次数、重排范围是Web性能优化的基本思路</li></ul> <h2 id="防抖-节流"><a href="#防抖-节流" class="header-anchor">#</a> 防抖&amp;&amp;节流</h2> <h3 id="防抖-debounce"><a href="#防抖-debounce" class="header-anchor">#</a> 防抖（<code>debounce</code>）</h3> <p>防抖就是在事件触发后的n秒之后，再去执行真正需要执行的函数，如果在这n秒之内事件又被触发，则重新开始计时。</p> <p>防抖函数实现如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span>  <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay<span class="token operator">=</span><span class="token number">500</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">//清空定时器</span>

        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//改变this指向</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>  <span class="token comment">//延迟一定时间执行</span>

<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="节流-throttle"><a href="#节流-throttle" class="header-anchor">#</a> 节流（<code>throttle</code>）</h3> <p>节流就是规定好一个单位时间，触发函数一次。如果在这个单位时间内触发多次函数的话，只有一次是可被执行的。想执行多次的话，只能等到下一个周期里。</p> <p>实现代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定时器版本</span>

<span class="token keyword">const</span> <span class="token function-variable function">trottle1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay<span class="token operator">=</span><span class="token number">500</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>

            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span> <span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 时间戳版本</span>

<span class="token keyword">const</span> <span class="token function-variable function">trottle2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay<span class="token operator">=</span><span class="token number">500</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    <span class="token keyword">let</span> oldTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">const</span> nowTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>nowTime <span class="token operator">-</span> oldTime <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span><span class="token punctuation">{</span>

            oldTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span> <span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实际运用中比如，按键快频率重复触发，拖拽场景、表单验证场景<code>resize</code> ，<code>scroll</code>、<code>onmosemove</code>等等触发事件。 性能优化相关。</p> <h2 id="cookies-、-sessionstorage和localstorage"><a href="#cookies-、-sessionstorage和localstorage" class="header-anchor">#</a> <code>cookies</code> 、 <code>sessionStorage</code>和<code>localstorage</code></h2> <h3 id="三者之间的差异"><a href="#三者之间的差异" class="header-anchor">#</a> 三者之间的差异</h3> <p>相同点：都存储在客户端</p> <p>不同点：</p> <p>1.存储大小</p> <p>cookie数据大小不能超过<code>4k</code>。<code>sessionStorage</code>和<code>localStorage</code> 虽然也有存储大小的限制，但比cookie大得多，可以达到<code>5M</code>或更大。  2.有效时间</p> <p><code>localStorage</code>    存储持久数据，浏览器关闭后数据不丢失除非主动删除数据；</p> <p><code>sessionStorage</code>  数据在当前浏览器窗口关闭后自动删除。</p> <p><code>cookie</code>          设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭</p> <p>3.数据与服务器之间的交互方式</p> <p><code>cookie</code>的数据会自动的传递到服务器，服务器端也可以写<code>cookie</code>到客户端</p> <p><code>sessionStorage</code>和<code>localStorage</code>不会自动把数据发给服务器，仅在本地保存。</p> <h3 id="token储存"><a href="#token储存" class="header-anchor">#</a> Token储存</h3> <p>Token 其实就是访问资源的凭证。一般是用户通过用户名和密码登录成功之后，服务器将登陆凭证做数字签名，加密之后得到的字符串作为 token。</p> <p>它在用户登录成功之后会返回给客户端，客户端主要有这么几种存储方式：</p> <ol><li><p>存储在 <code>localStorage</code> 中，每次调用接口的时候都把它当成一个字段传给后台存储在 <code>cookie</code> 中，让它自动发送，不过缺点就是不能跨域拿到之后存储在<code>localStorage</code> 中，每次调用接口的时候放在 HTTP 请求头的 <code>Authorization</code> 字段里所以token 在客户端一般存放于 <code>localStorage</code>，<code>cookie</code>，或 <code>sessionStorage</code> 中。</p></li> <li><p>将token存放在<code>webStroage</code>中，可以通过同域的<code>js</code>来访问 。这样会导致很容易受到<code>xss</code>攻击，特别是项目中引入很多 第三方<code>js</code>类库的情况下。如果<code>js</code>脚本被盗用，攻击者就 可以轻易访问你的网站，<code>webStroage</code>作为一种储存机制，在传输过程中不会执行任何安全标准。</p> <ol><li><code>XSS</code>攻击：<code>cross-site Scripting</code>（跨站脚本攻击）是一种注入代码攻击 。恶意攻击者在目标网站上注入script代码，当访问者浏览网站的时候通过执行注入的script代码达到窃取用户信息，盗用用户身份等。</li></ol></li> <li><p>将<code>token</code>存放在<code>cookie</code>中可以指定 <code>httponly</code>，来防止被<code>Javascript</code>读取，也可以指定<code>secure</code>，来保证<code>token</code>只在<code>HTTPS</code>下传输。缺点是不符合<code>Restful</code> 最佳实践，容易受到<code>CSRF</code>攻击。<code>CSRF</code>跨站点请求伪造(Cross—Site Request Forgery)，跟<code>XSS</code>攻击一样，存在巨大的危害性。</p> <ol><li>简单来说就是恶意攻击者盗用已经认证过的用户信息，以用户信息名义进行一些操作（如发邮件、转账、购买商品等等）。由于身份已经认证过，所以目标网站会认为操作都是真正的用户操作的 。<code>CSRF</code>并不能拿到用户信息，它只是盗用的用户凭证去进行操作。</li></ol></li></ol> <h3 id="怎么禁止让js读取cookie-怎么让cookie只在https下传输"><a href="#怎么禁止让js读取cookie-怎么让cookie只在https下传输" class="header-anchor">#</a> 怎么禁止让<code>js</code>读取<code>cookie</code>？怎么让<code>cookie</code>只在<code>HTTPS</code>下传输？</h3> <p>由于cookie会存放在客户端，一般情况下会保存一些凭证及状态信息，为了防止<code>cookie</code>泄露造成安全问题。可以这只<code>cookie</code>的 <code>HttpOnly</code>属性，那么通过程序(<code>JS</code>脚本、Applet等)将无法读取到Cookie信息，这样能有效的防止<code>XSS</code>攻击。</p> <p>cookie 中有个属性secure，当该属性设置为true时，表示创建的 Cookie 会被以安全的形式向服务器传输，也就是只能在 <code>HTTPS</code> 连接中被浏览器传递到服务器端进行会话验证，</p> <p>如果是 HTTP 连接则不会传递该cookie信息，所以不会被窃取到Cookie 的具体内容。就是只允许在加密的情况下将cookie加在数据包请求头部，防止cookie被带出来。</p> <p>secure属性是防止信息在传递的过程中被监听捕获后信息泄漏。但是这两个属性并不能解决cookie在本机出现的信息泄漏的问题。</p> <h2 id="客户端缓存"><a href="#客户端缓存" class="header-anchor">#</a> 客户端缓存</h2> <h3 id="客户端缓存-2"><a href="#客户端缓存-2" class="header-anchor">#</a> 客户端缓存</h3> <p>1.强缓存服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接用缓存，不在时间内，执行比较缓存策略。<code>Cache-control</code>（相对值） / <code>Expries</code>（绝对值）<code>Expries</code>是<code>http1.0</code>的标准</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
nowTime<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Expires&quot;</span><span class="token punctuation">,</span>nowTime<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>到了HTTP/1.1，Expire已经被Cache-Control替代<code>ctx.set</code>(&quot;Cache-control&quot;,&quot;max-age=3600&quot;)  //设置缓存时间  3600s</p> <p>（1）public：所有内容都将被缓存（客户端和代理服务器都可缓存）</p> <p>（2）private：所有内容只有客户端可以缓存，Cache-Control的默认取值</p> <p>（3）no-cache：客户端缓存内容，但是是否使用缓存则需要经过协商缓存来验证决定</p> <p>（4）no-store：所有内容都不会被缓存，即不使用强制缓存，也不使用协商缓存</p> <p>（5）max-age=xxx ：缓存内容将在xxx秒后失效Cache-Control优先级比Expires高from memory cache代表使用内存中的缓存，from disk cache则代表使用的是硬盘中的缓存，浏览器读取缓存的顺序为memory –&gt; disk。</p> <p>2.协商缓存让客户端与服务器之间能实现缓存文件是否更新的验证、提升缓存的复用率，将缓存信息中的<code>Etag</code>和<code>Last-Modified</code>通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存。</p> <p>出现 <code>from disk</code>、<code>from memory</code> 的 策略是强缓存。<code>Last-Modify/if-Modify-SinceETag/if-None-Macth</code>协商缓存的标识也是在响应报文的HTTP头中和请求结果一起返回给浏览器的，控制协商缓存的字段分别有：<code>Last-Modified / If-Modified-Since</code>和<code>Etag / If-None-Match</code>，其中<code>Etag / If-None-Match</code>的优先级比<code>Last-Modified / If-Modified-Since</code>高。缓存关系强缓存优于协商缓存，强缓存中 <code>Cache-control</code>优于 <code>Expries</code>，协商缓存中<code>ETag/ If-None-Match</code> 优先级高于 <code>Last-Modified / If-Modified-Since</code>。</p> <h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h2> <h3 id="浏览器为什么要阻止跨域请求"><a href="#浏览器为什么要阻止跨域请求" class="header-anchor">#</a> 浏览器为什么要阻止跨域请求?</h3> <p>浏览器阻止跨域请求的原因是”同源策略“，”同源策略“主要解决的问题是浏览器的安全问题，同源是 协议 、域名 、端口都相同，非同源是只要协议、域名、端口有一个不同就会造成非同源。如下：</p> <p><code>http://www.kaikeba.com:443</code>   //http:协议  <code>www.kaikeba.com</code>; 域名  443; 端口  <code>http://www.kaikeba.com:3000</code></p> <p>如上两地址由于端口不同就造成跨域问题。</p> <p>非同源会造成：</p> <p>1.无法获取<code>cookie</code>、<code>localstroage</code>、<code>indexedDB</code>。</p> <p>2.无法访问网页中<code>dom</code>。</p> <p>3无法发送网络请求。</p> <p>所以浏览器阻止跨域的原因是基于网络安全考虑。</p> <h3 id="如何解决跨域"><a href="#如何解决跨域" class="header-anchor">#</a> 如何解决跨域?</h3> <p>解决跨域方式有很多种例如：</p> <p>1.<code>jsonp</code>跨域。</p> <p>2.<code>postMessage</code>解决跨域</p> <p>3.跨域资源共享（<code>CORS</code>）</p> <p>4.<code>nginx</code> 反向代理</p> <p>5.<code>nodejs</code>中间件正向代理</p> <p>7.<code>websocket</code>协议跨域。</p> <p>跨域是浏览器出于安全策略阻止非同源请求，但是每次跨域请求其实都是正常发送的，服务端也会正常返回，只是被浏览器拦截起来了。所以每次跨域请求都会到达服务端。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8914b41c.js" defer></script><script src="/assets/js/3.7f8ab6bd.js" defer></script><script src="/assets/js/15.df2ae387.js" defer></script>
  </body>
</html>
